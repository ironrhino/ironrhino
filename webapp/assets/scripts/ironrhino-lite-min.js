/*
 Copyright (C) 2011 Alex Gorbatchev. All rights reserved.
 license MIT License
 Copyright (C) 2011 Alex Gorbatchev. All rights reserved.
 license MIT License
 Copyright (C) 2011 Alex Gorbatchev. All rights reserved.
 license MIT License
 Copyright (C) 2011 Alex Gorbatchev. All rights reserved.
 license MIT License
 Copyright (C) 2011 Alex Gorbatchev. All rights reserved.
 license MIT License
 Copyright (C) 2011 Alex Gorbatchev. All rights reserved.
 license MIT License
 Copyright (C) 2011 Alex Gorbatchev. All rights reserved.
 license MIT License
 Copyright (C) 2011 Alex Gorbatchev. All rights reserved.
 license MIT License
 Copyright (C) 2011 Alex Gorbatchev. All rights reserved.
 license MIT License
*/
(function(b,c,d){c=navigator.userAgent.toLowerCase();d=/(chrome)[ \/]([\w.]+)/.exec(c)||/(webkit)[ \/]([\w.]+)/.exec(c)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(c)||/(msie) ([\w.]+)/.exec(c)||0>c.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(c)||[];c=d[1]||"";d=d[2]||"0";var f={};c&&(f[c]=!0,f.version=d);f.chrome?f.webkit=!0:f.webkit&&(f.safari=!0);b.browser=f})(jQuery,window);
jQuery.cookie=function(b,c,d){if(1<arguments.length&&(null===c||"object"!==typeof c)){d=jQuery.extend({},d);null===c&&(d.expires=-1);if("number"===typeof d.expires){var f=d.expires,e=d.expires=new Date;e.setDate(e.getDate()+f)}return document.cookie=[encodeURIComponent(b),"=",d.raw?String(c):encodeURIComponent(String(c)),d.expires?"; expires="+d.expires.toUTCString():"",d.path?"; path="+d.path:"",d.domain?"; domain="+d.domain:"",d.secure?"; secure":""].join("")}d=c||{};e=d.raw?function(b){return b}:
decodeURIComponent;return(f=RegExp("(?:^|; )"+encodeURIComponent(b)+"=([^;]*)").exec(document.cookie))?e(f[1]):null};
(function(b){b.fn.rc4=function(d){var c=b.extend({key:null,method:"encrypt",callback:null},d);null==b.fn.rc4.ctrlrInst&&(b.fn.rc4.ctrlrInst=new b.fn.rc4.ctrlr(c));return this.each(function(){b.fn.rc4.ctrlrInst.settings=c;b.fn.rc4.ctrlrInst.container=this;b.fn.rc4.ctrlrInst.initialise(this)})};b.extend({hexEncode:function(b){for(var c=[],e=0;256>e;e++)c[e]="0123456789abcdef".charAt(e>>4)+"0123456789abcdef".charAt(e&15);for(var g=[],e=0;e<b.length;e++)g[e]=c[b.charCodeAt(e)];return g.join("")},hexDecode:function(b){for(var c=
[],e=0;256>e;e++)c["0123456789abcdef".charAt(e>>4)+"0123456789abcdef".charAt(e&15)]=String.fromCharCode(e);if(!b.match(/^[a-f0-9]*$/i))return!1;b.length%2&&(b="0"+b);for(var g=[],h=0,e=0;e<b.length;e+=2)g[h++]=c[b.substr(e,2)];return g.join("")},rc4Encrypt:function(b,c){s=[];for(var e=0;256>e;e++)s[e]=e;for(var g=0,h,e=0;256>e;e++)g=(g+s[e]+b.charCodeAt(e%b.length))%256,h=s[e],s[e]=s[g],s[g]=h;for(var g=e=0,m="",k=0;k<c.length;k++)e=(e+1)%256,g=(g+s[e])%256,h=s[e],s[e]=s[g],s[g]=h,m+=String.fromCharCode(c.charCodeAt(k)^
s[(s[e]+s[g])%256]);return m},rc4Decrypt:function(d,c){return b.rc4Encrypt(d,c)},rc4EncryptStr:function(d,c){return b.hexEncode(b.rc4Encrypt(c,unescape(encodeURIComponent(d))))},rc4DecryptStr:function(d,c){return decodeURIComponent(escape(b.rc4Decrypt(c,b.hexDecode(d))))}});b.rc4={};b.fn.rc4.ctrlrInst=null;b.fn.rc4.ctrlr=function(b){this.settings=b};var c=b.fn.rc4.ctrlr;c.prototype.initialise=function(){this.settings.key&&this.settings.method&&("ENCRYPT"==b.trim(this.settings.method.toUpperCase())&&
this.setObjectValue(b.hexEncode(b.rc4Encrypt(this.settings.key,this.getObjectValue()))),"DECRYPT"==b.trim(this.settings.method.toUpperCase())&&this.setObjectValue(b.rc4Decrypt(this.settings.key,b.hexDecode(this.getObjectValue()))))};c.prototype.getObjectValue=function(){if(b.fn.rc4.ctrlrInst.container.innerHTML)return b.fn.rc4.ctrlrInst.container.innerHTML;if(b.fn.rc4.ctrlrInst.container.value)return b.fn.rc4.ctrlrInst.container.value};c.prototype.setObjectValue=function(d){b.fn.rc4.ctrlrInst.container.innerHTML&&
(b.fn.rc4.ctrlrInst.container.innerHTML=d);b.fn.rc4.ctrlrInst.container.value&&(b.fn.rc4.ctrlrInst.container.value=d)}})(jQuery);
(function(b){function c(){if(b.fn.ajaxSubmit.debug){var d="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(d):window.opera&&window.opera.postError&&window.opera.postError(d)}}b.fn.ajaxSubmit=function(d){function f(e){for(var c=new FormData,g=0;g<e.length;g++)"file"!=e[g].type&&c.append(e[g].name,e[g].value);m.find("input:file:enabled").each(function(){var e=b(this).attr("name"),d=this.files;if(e)for(var g=0;g<d.length;g++)c.append(e,d[g])});
if(d.extraData)for(var h in d.extraData)c.append(h,d.extraData[h]);d.data=null;e=b.extend(!0,{},b.ajaxSettings,d,{contentType:!1,processData:!1,cache:!1,type:"POST"});e.data=null;var f=e.beforeSend;e.beforeSend=function(b,e){e.data=c;b.upload&&(b.upload.onprogress=function(b){e.progress(b.position,b.total)});f&&f.call(e,b,d)};b.ajax(e)}function e(e){function h(){function e(){try{var b=(w.contentWindow?w.contentWindow.document:w.contentDocument?w.contentDocument:w.document).readyState;c("state = "+
b);"uninitialized"==b.toLowerCase()&&setTimeout(e,50)}catch(d){c("Server abort: ",d," (",d.name,")"),f(F),D&&clearTimeout(D),D=void 0}}var d=m.attr("target"),l=m.attr("action");k.setAttribute("target",E);g||k.setAttribute("method","POST");l!=n.url&&k.setAttribute("action",n.url);n.skipEncodingOverride||g&&!/post/i.test(g)||m.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});n.timeout&&(D=setTimeout(function(){G=!0;f(H)},n.timeout));var p=[];try{if(n.extraData)for(var z in n.extraData)p.push(b('<input type="hidden" name="'+
z+'">').attr("value",n.extraData[z]).appendTo(k)[0]);n.iframeTarget||(B.appendTo("body"),w.attachEvent?w.attachEvent("onload",f):w.addEventListener("load",f,!1));setTimeout(e,15);k.submit()}finally{k.setAttribute("action",l),d?k.setAttribute("target",d):m.removeAttr("target"),b(p).remove()}}function f(e){if(!t.aborted&&!I){try{y=w.contentWindow?w.contentWindow.document:w.contentDocument?w.contentDocument:w.document}catch(d){c("cannot access response document: ",d),e=F}if(e===H&&t)t.abort("timeout");
else if(e==F&&t)t.abort("server abort");else if(y&&y.location.href!=n.iframeSrc||G){w.detachEvent?w.detachEvent("onload",f):w.removeEventListener("load",f,!1);e="success";var g;try{if(G)throw"timeout";var h="xml"==n.dataType||y.XMLDocument||b.isXMLDoc(y);c("isXml="+h);if(!h&&window.opera&&(null==y.body||""==y.body.innerHTML)&&--K){c("requeing onLoad callback, DOM not available");setTimeout(f,250);return}var m=y.body?y.body:y.documentElement;t.responseText=m?m.innerHTML:null;t.responseXML=y.XMLDocument?
y.XMLDocument:y;h&&(n.dataType="xml");t.getResponseHeader=function(b){return{"content-type":n.dataType}[b]};m&&(t.status=Number(m.getAttribute("status"))||t.status,t.statusText=m.getAttribute("statusText")||t.statusText);var k=(n.dataType||"").toLowerCase(),l=/(json|script|text)/.test(k);if(l||n.textarea){var p=y.getElementsByTagName("textarea")[0];if(p)t.responseText=p.value,t.status=Number(p.getAttribute("status"))||t.status,t.statusText=p.getAttribute("statusText")||t.statusText;else if(l){var A=
y.getElementsByTagName("pre")[0],z=y.getElementsByTagName("body")[0];A?t.responseText=A.textContent?A.textContent:A.innerText:z&&(t.responseText=z.textContent?z.textContent:z.innerText)}}else"xml"!=k||t.responseXML||null==t.responseText||(t.responseXML=L(t.responseText));try{J=M(t,k,n)}catch(q){e="parsererror",t.error=g=q||e}}catch(u){c("error caught: ",u),e="error",t.error=g=u||e}t.aborted&&(c("upload aborted"),e=null);t.status&&(e=200<=t.status&&300>t.status||304===t.status?"success":"error");"success"===
e?(n.success&&n.success.call(n.context,J,"success",t),r&&b.event.trigger("ajaxSuccess",[t,n])):e&&(void 0==g&&(g=t.statusText),n.error&&n.error.call(n.context,t,e,g),r&&b.event.trigger("ajaxError",[t,n,g]));r&&b.event.trigger("ajaxComplete",[t,n]);r&&!--b.active&&b.event.trigger("ajaxStop");n.complete&&n.complete.call(n.context,t,e);I=!0;n.timeout&&clearTimeout(D);setTimeout(function(){n.iframeTarget||B.remove();t.responseXML=null},100)}}}var k=m[0],l,p,n,r,E,B,w,t,G,D;l=!!b.fn.prop;if(e)if(l)for(p=
0;p<e.length;p++)l=b(k[e[p].name]),l.prop("disabled",!1);else for(p=0;p<e.length;p++)l=b(k[e[p].name]),l.removeAttr("disabled");if(b(":input[name=submit],:input[id=submit]",k).length)alert('Error: Form elements must not have name or id of "submit".');else if(n=b.extend(!0,{},b.ajaxSettings,d),n.context=n.context||n,E="jqFormIO"+(new Date).getTime(),n.iframeTarget?(B=b(n.iframeTarget),l=B.attr("name"),null==l?B.attr("name",E):E=l):(B=b('<iframe name="'+E+'" src="'+n.iframeSrc+'" />'),B.css({position:"absolute",
top:"-1000px",left:"-1000px"})),w=B[0],t={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var d="timeout"===e?"timeout":"aborted";c("aborting upload... "+d);this.aborted=1;B.attr("src",n.iframeSrc);t.error=d;n.error&&n.error.call(n.context,t,d,e);r&&b.event.trigger("ajaxError",[t,n,d]);n.complete&&n.complete.call(n.context,t,d)}},(r=n.global)&&!b.active++&&b.event.trigger("ajaxStart"),
r&&b.event.trigger("ajaxSend",[t,n]),n.beforeSend&&!1===n.beforeSend.call(n.context,t,n))n.global&&b.active--;else if(!t.aborted){(e=k.clk)&&(l=e.name)&&!e.disabled&&(n.extraData=n.extraData||{},n.extraData[l]=e.value,"image"==e.type&&(n.extraData[l+".x"]=k.clk_x,n.extraData[l+".y"]=k.clk_y));var H=1,F=2;e=b("meta[name=csrf-token]").attr("content");(l=b("meta[name=csrf-param]").attr("content"))&&e&&(n.extraData=n.extraData||{},n.extraData[l]=e);n.forceSync?h():setTimeout(h,10);var J,y,K=50,I,L=b.parseXML||
function(b,e){window.ActiveXObject?(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(b)):e=(new DOMParser).parseFromString(b,"text/xml");return e&&e.documentElement&&"parsererror"!=e.documentElement.nodeName?e:null},N=b.parseJSON||function(b){return window.eval("("+b+")")},M=function(e,d,c){var g=e.getResponseHeader("content-type")||"",h="xml"===d||!d&&0<=g.indexOf("xml");e=h?e.responseXML:e.responseText;h&&"parsererror"===e.documentElement.nodeName&&b.error&&b.error("parsererror");
c&&c.dataFilter&&(e=c.dataFilter(e,d));"string"===typeof e&&("json"===d||!d&&0<=g.indexOf("json")?e=N(e):("script"===d||!d&&0<=g.indexOf("javascript"))&&b.globalEval(e));return e}}}if(!this.length)return c("ajaxSubmit: skipping submit process - no element selected"),this;var g,h,m=this;"function"==typeof d&&(d={success:d});g=this.attr("method");h=this.attr("action");(h=(h="string"===typeof h?b.trim(h):"")||window.location.href||"")&&(h=(h.match(/^([^#]+)/)||[])[1]);d=b.extend(!0,{url:h,success:b.ajaxSettings.success,
type:g||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},d);h={};this.trigger("form-pre-serialize",[this,d,h]);if(h.veto)return c("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(d.beforeSerialize&&!1===d.beforeSerialize(this,d))return c("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var k=d.traditional;void 0===k&&(k=b.ajaxSettings.traditional);var p,l=this.formToArray(d.semantic);d.data&&(d.extraData=d.data,p=b.param(d.data,
k));if(d.beforeSubmit&&!1===d.beforeSubmit(l,this,d))return c("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[l,this,d,h]);if(h.veto)return c("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;h=b.param(l,k);p&&(h=h?h+"&"+p:p);"GET"==d.type.toUpperCase()?(d.url+=(0<=d.url.indexOf("?")?"&":"?")+h,d.data=null):d.data=h;var n=[];d.resetForm&&n.push(function(){m.resetForm()});d.clearForm&&n.push(function(){m.clearForm(d.includeHidden)});
if(!d.dataType&&d.target){var r=d.success||function(){};n.push(function(e){var c=d.replaceTarget?"replaceWith":"html";b(d.target)[c](e).each(r,arguments)})}else d.success&&n.push(d.success);d.success=function(b,e,c){for(var g=d.context||d,h=0,f=n.length;h<f;h++)n[h].apply(g,[b,e,c||m,m])};k=b("input:file:enabled[value]",this);p=0<k.length;h="multipart/form-data"==m.attr("enctype")||"multipart/form-data"==m.attr("encoding");k=!!(p&&k.get(0).files&&window.FormData);c("fileAPI :"+k);!1!==d.iframe&&(d.iframe||
(p||h)&&!k)?d.closeKeepAlive?b.get(d.closeKeepAlive,function(){e(l)}):e(l):(p||h)&&k?(d.progress=d.progress||b.noop,f(l)):b.ajax(d);this.trigger("form-submit-notify",[this,d]);return this};b.fn.ajaxForm=function(d){if(0===this.length){var f=this.selector,e=this.context;if(!b.isReady&&f)return c("DOM not ready, queuing ajaxForm"),b(function(){b(f,e).ajaxForm(d)}),this;c("terminating; zero elements found by selector"+(b.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",
function(e){e.isDefaultPrevented()||(e.preventDefault(),b(this).ajaxSubmit(d))}).bind("click.form-plugin",function(e){var d=e.target,c=b(d);if(!c.is(":submit,input:image")){d=c.closest(":submit");if(0==d.length)return;d=d[0]}var f=this;f.clk=d;"image"==d.type&&(void 0!=e.offsetX?(f.clk_x=e.offsetX,f.clk_y=e.offsetY):"function"==typeof b.fn.offset?(c=c.offset(),f.clk_x=e.pageX-c.left,f.clk_y=e.pageY-c.top):(f.clk_x=e.pageX-d.offsetLeft,f.clk_y=e.pageY-d.offsetTop));setTimeout(function(){f.clk=f.clk_x=
f.clk_y=null},100)})};b.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};b.fn.formToArray=function(d){var c=[];if(0===this.length)return c;var e=this[0],g=d?e.getElementsByTagName("*"):e.elements;if(!g)return c;var h,m,k,p,l,n;h=0;for(l=g.length;h<l;h++)if(m=g[h],k=m.name)if(d&&e.clk&&"image"==m.type)m.disabled||e.clk!=m||(c.push({name:k,value:b(m).val(),type:m.type}),c.push({name:k+".x",value:e.clk_x},{name:k+".y",value:e.clk_y}));else if((p=b.fieldValue(m,
!0))&&p.constructor==Array)for(m=0,n=p.length;m<n;m++)c.push({name:k,value:p[m]});else null!==p&&"undefined"!=typeof p&&c.push({name:k,value:p,type:m.type});!d&&e.clk&&(d=b(e.clk),g=d[0],(k=g.name)&&!g.disabled&&"image"==g.type&&(c.push({name:k,value:d.val()}),c.push({name:k+".x",value:e.clk_x},{name:k+".y",value:e.clk_y})));return c};b.fn.formSerialize=function(d){return b.param(this.formToArray(d))};b.fn.fieldSerialize=function(d){var c=[];this.each(function(){var e=this.name;if(e){var g=b.fieldValue(this,
d);if(g&&g.constructor==Array)for(var h=0,m=g.length;h<m;h++)c.push({name:e,value:g[h]});else null!==g&&"undefined"!=typeof g&&c.push({name:this.name,value:g})}});return b.param(c)};b.fn.fieldValue=function(d){for(var c=[],e=0,g=this.length;e<g;e++){var h=b.fieldValue(this[e],d);null===h||"undefined"==typeof h||h.constructor==Array&&!h.length||(h.constructor==Array?b.merge(c,h):c.push(h))}return c};b.fieldValue=function(d,c){var e=d.name,g=d.type,h=d.tagName.toLowerCase();void 0===c&&(c=!0);if(c&&
(!e||d.disabled||"reset"==g||"button"==g||("checkbox"==g||"radio"==g)&&!d.checked||("submit"==g||"image"==g)&&d.form&&d.form.clk!=d||"select"==h&&-1==d.selectedIndex))return null;if("select"==h){var m=d.selectedIndex;if(0>m)return null;for(var e=[],h=d.options,k=(g="select-one"==g)?m+1:h.length,m=g?m:0;m<k;m++){var p=h[m];if(p.selected){var l=p.value;l||(l=p.attributes&&p.attributes.value&&!p.attributes.value.specified?p.text:p.value);if(g)return l;e.push(l)}}return e}return b(d).val()};b.fn.clearForm=
function(d){return this.each(function(){b("input,select,textarea",this).clearFields(d)})};b.fn.clearFields=b.fn.clearInputs=function(b){var c=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var e=this.type,g=this.tagName.toLowerCase();c.test(e)||"textarea"==g||b&&/hidden/.test(e)?this.value="":"checkbox"==e||"radio"==e?this.checked=!1:"select"==g&&(this.selectedIndex=-1)})};b.fn.resetForm=function(){return this.each(function(){("function"==
typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})};b.fn.enable=function(b){void 0===b&&(b=!0);return this.each(function(){this.disabled=!b})};b.fn.selected=function(d){void 0===d&&(d=!0);return this.each(function(){var c=this.type;"checkbox"==c||"radio"==c?this.checked=d:"option"==this.tagName.toLowerCase()&&(c=b(this).parent("select"),d&&c[0]&&"select-one"==c[0].type&&c.find("option").selected(!1),this.selected=d)})};b.fn.ajaxSubmit.debug=!1})(jQuery);
(function(b){b.format=function(){var b={date:{format:"MMM dd, yyyy h:mm:ss a",monthsFull:"January February March April May June July August September October November December".split(" "),monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysFull:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),daysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),shortDateFormat:"M/d/yyyy h:mm a",longDateFormat:"EEEE, MMMM dd, yyyy h:mm:ss a"},number:{format:"#,##0.0#",groupingSeparator:",",
decimalSeparator:"."}};return{locale:function(d){a={a:6};if(d)for(var f in d)for(var e in d[f])b[f][e]=d[f][e];return b},date:function(d,f){var e=0,g=0,h=0,h=g="",m,k;if("string"==typeof d){var p=function(b,e,d,c){for(;c>=d;c--){var g=b.substring(e,e+c);if(g.length>=d&&/^\d+$/.test(g))return g}return null};"undefined"==typeof f&&(f=b.date.format);for(var l=0,n=new Date(0,0,0,0,0,0,0),r=n.getYear(),q=n.getMonth()+1,u=1,v=n.getHours(),A=n.getMinutes(),z=n.getSeconds(),n=n.getMilliseconds(),C="",x;e<
f.length;){h="";for(g=f.charAt(e);f.charAt(e)==g&&e<f.length;)h+=f.charAt(e++);-1<h.indexOf("MMMM")&&4<h.length&&(h="MMMM");-1<h.indexOf("EEEE")&&4<h.length&&(h="EEEE");if("yyyy"==h||"yy"==h||"y"==h){"yyyy"==h&&(k=m=4);"yy"==h&&(k=m=2);"y"==h&&(m=2,k=4);r=p(d,l,m,k);if(null===r)return 0;l+=r.length;2==r.length&&(r=parseInt(r,10),r=70<r?1900+r:2E3+r)}else if("MMMM"==h){g=q=0;for(h=b.date.monthsFull.length;g<h;g++)if(x=b.date.monthsFull[g],d.substring(l,l+x.length).toLowerCase()==x.toLowerCase()){q=
g+1;l+=x.length;break}if(1>q||12<q)return 0}else if("MMM"==h){g=q=0;for(h=b.date.monthsShort.length;g<h;g++)if(x=b.date.monthsShort[g],d.substring(l,l+x.length).toLowerCase()==x.toLowerCase()){q=g+1;l+=x.length;break}if(1>q||12<q)return 0}else if("EEEE"==h)for(g=0,h=b.date.daysFull.length;g<h;g++){if(x=b.date.daysFull[g],d.substring(l,l+x.length).toLowerCase()==x.toLowerCase()){l+=x.length;break}}else if("EEE"==h)for(g=0,h=b.date.daysShort.length;g<h;g++){if(x=b.date.daysShort[g],d.substring(l,l+
x.length).toLowerCase()==x.toLowerCase()){l+=x.length;break}}else if("MM"==h||"M"==h){q=p(d,l,1,2);if(null===q||1>q||12<q)return 0;l+=q.length}else if("dd"==h||"d"==h){u=p(d,l,1,2);if(null===u||1>u||31<u)return 0;l+=u.length}else if("hh"==h||"h"==h){v=p(d,l,1,2);if(null===v||1>v||12<v)return 0;l+=v.length}else if("HH"==h||"H"==h){v=p(d,l,1,2);if(null===v||0>v||23<v)return 0;l+=v.length}else if("KK"==h||"K"==h){v=p(d,l,1,2);if(null===v||0>v||11<v)return 0;l+=v.length}else if("kk"==h||"k"==h){v=p(d,
l,1,2);if(null===v||1>v||24<v)return 0;l+=v.length;v--}else if("mm"==h||"m"==h){A=p(d,l,1,2);if(null===A||0>A||59<A)return 0;l+=A.length}else if("ss"==h||"s"==h){z=p(d,l,1,2);if(null===z||0>z||59<z)return 0;l+=z.length}else if("SSS"==h||"SS"==h||"S"==h){n=p(d,l,1,3);if(null===n||0>n||999<n)return 0;l+=n.length}else if("a"==h){C=d.substring(l,l+2).toLowerCase();if("am"==C)C="AM";else if("pm"==C)C="PM";else return 0;l+=2}else{if(h!=d.substring(l,l+h.length))return 0;l+=h.length}}if(l!=d.length)return 0;
if(2==q)if(0===r%4&&0!==r%100||0===r%400){if(29<u)return 0}else if(28<u)return 0;if((4==q||6==q||9==q||11==q)&&30<u)return 0;12>v&&"PM"==C?v=v-0+12:11<v&&"AM"==C&&(v-=12);return new Date(r,q-1,u,v,A,z,n)}e=function(b,e){return"undefined"==typeof e||2==e?(0<=b&&10>b?"0":"")+b:0<=b&&10>b?"00"+b:10<=b&&100>b?"0"+b:b};"undefined"==typeof f&&(f=b.date.format);k=d.getYear();1E3>k&&(k=String(k+1900));p=d.getMonth()+1;l=d.getDate();r=d.getDay();q=d.getHours();u=d.getMinutes();m=d.getSeconds();v=d.getMilliseconds();
d={y:k,yyyy:k,yy:String(k).substring(2,4),M:p,MM:e(p),MMM:b.date.monthsShort[p-1],MMMM:b.date.monthsFull[p-1],d:l,dd:e(l),EEE:b.date.daysShort[r],EEEE:b.date.daysFull[r],H:q,HH:e(q)};d.h=0===q?12:12<q?q-12:q;d.hh=e(d.h);d.k=0!==q?q:24;d.kk=e(d.k);d.K=11<q?q-12:q;d.KK=e(d.K);d.a=11<q?"PM":"AM";d.m=u;d.mm=e(u);d.s=m;d.ss=e(m);d.S=v;d.SS=e(v);d.SSS=e(v,3);k="";e=0;h=g="";for(m=!1;e<f.length;)if(h="",g=f.charAt(e),"'"==g)e++,f.charAt(e)==g?(k+=g,e++):m=!m;else{for(;f.charAt(e)==g;)h+=f.charAt(e++);-1!=
h.indexOf("MMMM")&&4<h.length&&(h="MMMM");-1!=h.indexOf("EEEE")&&4<h.length&&(h="EEEE");k="undefined"==typeof d[h]||m?k+h:k+d[h]}return k},number:function(d,f){var e,g,h,m,k;if("string"==typeof d)return e=b.number.groupingSeparator,h=b.number.decimalSeparator,m=d.indexOf(h),k=1,-1!=m&&(k=Math.pow(10,d.length-m-1)),d=d.replace(RegExp("["+e+"]","g"),""),d=d.replace(RegExp("["+h+"]"),"."),Math.round(d*k)/k;if("undefined"==typeof f||1>f.length)f=b.number.format;g=f.lastIndexOf(",");m=f.indexOf(".");h=
e="";var p=0>d,l=f.substr(m+1).replace(/#/g,"").length,n=f.substr(m+1).length,r=10;d=Math.abs(d);if(-1!=m){h=b.number.decimalSeparator;if(0<n){k=1E3;var r=Math.pow(r,n),q=Math.round(parseInt(d*r*k-Math.round(d)*r*k,10)/k),q=String(0>q?Math.round(parseInt(d*r*k-parseInt(d,10)*r*k,10)/k):q),u=d.toString().split(".");if("undefined"!=typeof u[1])for(k=0;k<n;k++)if("0"==u[1].substr(k,1)&&k<n-1&&q.length!=n)q="0"+q;else break;for(k=0;k<n-h.length;k++)q+="0";u="";for(k=0;k<q.length;k++){n=q.substr(k,1);
if(k>=l&&"0"==n&&/^0*$/.test(q.substr(k+1)))break;u+=n}h+=u}h==b.number.decimalSeparator&&(h="")}if(0!==m){e=""!=h?String(parseInt(Math.round(d*r)/r,10)):String(Math.round(d));l=b.number.groupingSeparator;r=0;-1!=g&&(r=-1!=m?m-g:f.length-g,r--);if(0<r){g=0;n="";for(k=e.length;k--;)0!==g&&0===g%r&&(n=l+n),n=e.substr(k,1)+n,g++;e=n}k=/#|,/g;m=-1!=m?f.substr(0,m).replace(k,"").length:f.replace(k,"").length;for(k=e.length;k<m;k++)e="0"+e}return(p?"-":"")+(e+h)}}}()})(jQuery);
(function(b){function c(e){function c(e){var d=RegExp(b.map(e,encodeURIComponent).join("|"),"ig");return function(b){return b.replace(d,decodeURIComponent)}}e=b.extend({unescape:!1},e||{});d.encoder=function(b){return!0===b?function(b){return b}:"string"==typeof b&&(b=c(b.split("")))||"function"==typeof b?function(e){return b(encodeURIComponent(e))}:encodeURIComponent}(e.unescape)}var d={put:function(b,e){(e||window).location.hash=this.encoder(b)},get:function(e){e=(e||window).location.hash.replace(/^#/,
"");try{return b.browser.mozilla?e:decodeURIComponent(e)}catch(d){return e}},encoder:encodeURIComponent},f={id:"__jQuery_history",init:function(){var e='<iframe id="'+this.id+'" style="display:none" src="javascript:false;" />';b("body").prepend(e);return this},_document:function(){return b("#"+this.id)[0].contentWindow.document},put:function(b){var e=this._document();e.open();e.close();d.put(b,e)},get:function(){return d.get(this._document())}},e={base:{callback:void 0,type:void 0,check:function(){},
load:function(b){},init:function(b,e){c(e);g.callback=b;g._options=e;g._init()},_init:function(){},_options:{}},timer:{_appState:void 0,_init:function(){var b=d.get();g._appState=b;g.callback(b);setInterval(g.check,100)},check:function(){var b=d.get();b!=g._appState&&(g._appState=b,g.callback(b))},load:function(b){b!=g._appState&&(d.put(b),g._appState=b,g.callback(b))}},iframeTimer:{_appState:void 0,_init:function(){var b=d.get();g._appState=b;f.init().put(b);g.callback(b);setInterval(g.check,100)},
check:function(){var b=f.get(),e=d.get();e!=b&&(e==g._appState?(g._appState=b,d.put(b),g.callback(b)):(g._appState=e,f.put(e),g.callback(e)))},load:function(b){b!=g._appState&&(d.put(b),f.put(b),g._appState=b,g.callback(b))}},hashchangeEvent:{_init:function(){g.callback(d.get());b(window).bind("hashchange",g.check)},check:function(){g.callback(d.get())},load:function(b){d.put(b)}}},g=b.extend({},e.base);g.type=b.browser.msie&&(8>b.browser.version||8>document.documentMode)?"iframeTimer":"onhashchange"in
window?"hashchangeEvent":"timer";b.extend(g,e[g.type]);b.history=g})(jQuery);
(function(b){b.alerts={verticalOffset:-75,horizontalOffset:0,repositionOnResize:!0,overlayOpacity:0.01,overlayColor:"#FFF",draggable:!0,okButton:"&nbsp;OK&nbsp;",cancelButton:"&nbsp;Cancel&nbsp;",dialogClass:null,alert:function(c,d,f){null==d&&(d="Alert");b.alerts._show(d,c,null,"alert",function(b){f&&f(b)})},confirm:function(c,d,f){null==d&&(d="Confirm");b.alerts._show(d,c,null,"confirm",function(b){f&&f(b)})},prompt:function(c,d,f,e){null==f&&(f="Prompt");b.alerts._show(f,c,d,"prompt",function(b){e&&
e(b)})},_show:function(c,d,f,e,g){b.alerts._hide();b.alerts._overlay("show");b("BODY").append('<div id="popup_container"><h1 id="popup_title"></h1><div id="popup_content"><div id="popup_icon"></div><div id="popup_message"></div></div></div>');b.alerts.dialogClass&&b("#popup_container").addClass(b.alerts.dialogClass);var h=b.browser.msie&&6>=parseInt(b.browser.version)?"absolute":"fixed";b("#popup_container").css({position:h,zIndex:99999,padding:0,margin:0});b("#popup_title").text(c);b("#popup_content").addClass(e);
b("#popup_message").text(d);b("#popup_message").html(b("#popup_message").text().replace(/\n/g,"<br />"));b("#popup_container").css({minWidth:b("#popup_container").outerWidth(),maxWidth:b("#popup_container").outerWidth()});b.alerts._reposition();b.alerts._maintainPosition(!0);switch(e){case "alert":b("#popup_message").after('<div id="popup_panel"><button id="popup_ok" class="btn">'+b.alerts.okButton+"</button></div>");b("#popup_ok").click(function(){b.alerts._hide();g(!0)});b("#popup_ok").focus().keypress(function(e){13!=
e.keyCode&&27!=e.keyCode||b("#popup_ok").trigger("click")});break;case "confirm":b("#popup_message").after('<div id="popup_panel"><button id="popup_ok" class="btn btn-primary">'+b.alerts.okButton+'</button> <button id="popup_cancel" class="btn">'+b.alerts.cancelButton+"</button></div>");b("#popup_ok").click(function(){b.alerts._hide();g&&g(!0)});b("#popup_cancel").click(function(){b.alerts._hide();g&&g(!1)});b("#popup_ok").focus();b("#popup_ok, #popup_cancel").keypress(function(e){13==e.keyCode&&
b("#popup_ok").trigger("click");27==e.keyCode&&b("#popup_cancel").trigger("click")});break;case "prompt":b("#popup_message").append('<br /><input type="text" size="30" id="popup_prompt" />').after('<div id="popup_panel"><button id="popup_ok" class="btn">'+b.alerts.okButton+'</button> <button id="popup_cancel" class="btn">'+b.alerts.cancelButton+"</button></div>"),b("#popup_prompt").width(b("#popup_message").width()),b("#popup_ok").click(function(){var e=b("#popup_prompt").val();b.alerts._hide();g&&
g(e)}),b("#popup_cancel").click(function(){b.alerts._hide();g&&g(null)}),b("#popup_prompt, #popup_ok, #popup_cancel").keypress(function(e){13==e.keyCode&&b("#popup_ok").trigger("click");27==e.keyCode&&b("#popup_cancel").trigger("click")}),f&&b("#popup_prompt").val(f),b("#popup_prompt").focus().select()}if(b.alerts.draggable)try{b("#popup_container").draggable({handle:b("#popup_title")}),b("#popup_title").css({cursor:"move"})}catch(m){}},_hide:function(){b("#popup_container").remove();b.alerts._overlay("hide");
b.alerts._maintainPosition(!1)},_overlay:function(c){switch(c){case "show":b.alerts._overlay("hide");b("BODY").append('<div id="popup_overlay"></div>');b("#popup_overlay").css({position:"absolute",zIndex:99998,top:"0px",left:"0px",width:"100%",height:b(document).height(),background:b.alerts.overlayColor,opacity:b.alerts.overlayOpacity});break;case "hide":b("#popup_overlay").remove()}},_reposition:function(){var c=b(window).height()/2-b("#popup_container").outerHeight()/2+b.alerts.verticalOffset,d=
b(window).width()/2-b("#popup_container").outerWidth()/2+b.alerts.horizontalOffset;0>c&&(c=0);0>d&&(d=0);b.browser.msie&&6>=parseInt(b.browser.version)&&(c+=b(window).scrollTop());b("#popup_container").css({top:c+"px",left:d+"px"});b("#popup_overlay").height(b(document).height())},_maintainPosition:function(c){if(b.alerts.repositionOnResize)switch(c){case !0:b(window).bind("resize",b.alerts._reposition);break;case !1:b(window).unbind("resize",b.alerts._reposition)}}};jAlert=function(c,d,f){b.alerts.alert(c,
d,f)};jConfirm=function(c,d,f){b.alerts.confirm(c,d,f)};jPrompt=function(c,d,f,e){b.alerts.prompt(c,d,f,e)}})(jQuery);
(function(b,c){function d(){}function f(){}function e(){}function g(b,e){"string"===typeof e&&(e=e.split("."));var d=e.join(".").replace(/\.(\w)/g,function(b,e){return e.toUpperCase()}),c=e.shift(),h;typeof(h=b[d])==n&&typeof(h=b[c])!=n&&0<e.length&&(h=g(h,e));return h}function h(){function b(e,g){c.bind(e,function(){return g.apply(d,arguments)})}var e=p.apply(arguments),d=this,c=1===e.length?d:e.shift(),g,e=e[0]||{};for(g in e)b(g,e[g])}function m(b,e){return{input:b,form:e}}var k=(JSON||{}).stringify,
p=Array.prototype.slice,l,n="undefined",r={itemManager:f,plugins:[],ext:{},html:{wrap:'<div class="text-core"><div class="text-wrap"/></div>',hidden:'<input type="hidden" />'},keys:{8:"backspace",9:"tab",13:"enter!",27:"escape!",37:"left",38:"up!",39:"right",40:"down!",46:"delete",108:"numpadEnter"}};if(!k)throw Error("JSON.stringify() not found");l=f.prototype;l.init=function(b){};l.filter=function(b,e){var d=[],c,g;for(c=0;c<b.length;c++)g=b[c],this.itemContains(g,e)&&d.push(g);return d};l.itemContains=
function(b,e){return 0==this.itemToString(b).toLowerCase().indexOf(e.toLowerCase())};l.stringToItem=function(b){return b};l.itemToString=function(b){return b};l.compareItems=function(b,e){return b==e};l=d.prototype;l.init=function(e,d){var c=this,g,h,m;c._defaults=b.extend({},r);c._opts=d||{};c._plugins={};c._itemManager=h=new (c.opts("item.manager"));e=b(e);m=b(c.opts("html.wrap"));g=b(c.opts("html.hidden"));e.wrap(m).keydown(function(b){return c.onKeyDown(b)}).keyup(function(b){return c.onKeyUp(b)}).data("textext",
c);b(c).data({hiddenInput:g,wrapElement:e.parents(".text-wrap").first(),input:e});g.attr("name",e.attr("name"));e.attr("name",null);g.insertAfter(e);b.extend(!0,h,c.opts("ext.item.manager"));b.extend(!0,c,c.opts("ext.*"),c.opts("ext.core"));c.originalWidth=e.outerWidth();c.invalidateBounds();h.init(c);c.initPatches();c.initPlugins(c.opts("plugins"),b.fn.textext.plugins);c.on({setFormData:c.onSetFormData,getFormData:c.onGetFormData,setInputData:c.onSetInputData,anyKeyUp:c.onAnyKeyUp});c.trigger("postInit");
c.trigger("ready");c.getFormData(0)};l.initPatches=function(){var e=[],c=b.fn.textext.patches,d;for(d in c)e.push(d);this.initPlugins(e,c)};l.initPlugins=function(e,c){var d,g,h=[],m;"string"==typeof e&&(e=e.split(/\s*,\s*|\s+/g));for(m=0;m<e.length;m++)if(d=e[m],g=c[d])this._plugins[d]=g=new g,this[d]=function(b){return function(){return b}}(g),h.push(g),b.extend(!0,g,this.opts("ext.*"),this.opts("ext."+d));h.sort(function(b,e){b=b.initPriority();e=e.initPriority();return b===e?0:b<e?1:-1});for(m=
0;m<h.length;m++)h[m].init(this)};l.hasPlugin=function(b){return!!this._plugins[b]};l.on=h;l.bind=function(b,e){this.input().bind(b,e)};l.trigger=function(){var b=arguments;this.input().trigger(b[0],p.call(b,1))};l.itemManager=function(){return this._itemManager};l.input=function(){return b(this).data("input")};l.opts=function(b){var e=g(this._opts,b);return"undefined"==typeof e?g(this._defaults,b):e};l.wrapElement=function(){return b(this).data("wrapElement")};l.invalidateBounds=function(){var b=
this.input(),e=this.wrapElement(),c=e.parent(),d=this.originalWidth,g;this.trigger("preInvalidate");g=b.outerHeight();b.outerWidth(d);e.width(d).height(g);c.height(g);this.trigger("postInvalidate")};l.focusInput=function(){this.input()[0].focus()};l.serializeData=k;l.hiddenInput=function(e){return b(this).data("hiddenInput")};l.getWeightedEventResponse=function(b,e){var c={},d=0;this.trigger(b,c,e);for(var g in c)d=Math.max(d,g);return c[d]};l.getFormData=function(b){b=this.getWeightedEventResponse("getFormData",
b||0);this.trigger("setFormData",b.form);this.trigger("setInputData",b.input)};l.onAnyKeyUp=function(b,e){this.getFormData(e)};l.onSetInputData=function(b,e){this.input().val(e)};l.onSetFormData=function(b,e){this.hiddenInput().val(this.serializeData(e))};l.onGetFormData=function(b,e){var c=this.input().val();e[0]=m(c,c)};b(["Down","Up"]).each(function(){var b=this.toString();l["onKey"+b]=function(e){var c=this.opts("keys")[e.keyCode],d=!0;c&&(d="!"!=c.substr(-1),c=c.replace("!",""),this.trigger(c+
"Key"+b),"Up"==b&&this._lastKeyDown==e.keyCode&&(this._lastKeyDown=null,this.trigger(c+"KeyPress")),"Down"==b&&(this._lastKeyDown=e.keyCode));this.trigger("anyKey"+b,e.keyCode);return d}});l=e.prototype;l.on=h;l.formDataObject=m;l.init=function(b){throw Error("Not implemented");};l.baseInit=function(e,c){e._defaults=b.extend(!0,e._defaults,c);this._core=e;this._timers={}};l.startTimer=function(b,e,c){var d=this;d.stopTimer(b);d._timers[b]=setTimeout(function(){delete d._timers[b];c.apply(d)},1E3*
e)};l.stopTimer=function(b){clearTimeout(this._timers[b])};l.core=function(){return this._core};l.opts=function(b){return this.core().opts(b)};l.itemManager=function(){return this.core().itemManager()};l.input=function(){return this.core().input()};l.val=function(b){var e=this.input();if(typeof b===n)return e.val();e.val(b)};l.trigger=function(){var b=this.core();b.trigger.apply(b,arguments)};l.bind=function(b,e){this.core().bind(b,e)};l.initPriority=function(){return 0};var q=!1,u=b.fn.textext=function(e){var c;
q||null==(c=b.fn.textext.css)||(b("head").append("<style>"+c+"</style>"),q=!0);return this.map(function(){var c=b(this);if(null==e)return c.data("textext");var g=new d;g.init(c,e);c.data("textext",g);return g.input()[0]})};u.addPlugin=function(b,e){u.plugins[b]=e;e.prototype=new u.TextExtPlugin};u.addPatch=function(b,e){u.patches[b]=e;e.prototype=new u.TextExtPlugin};u.TextExt=d;u.TextExtPlugin=e;u.ItemManager=f;u.plugins={};u.patches={}})(jQuery);
(function(b){function c(){}b.fn.textext.TextExtIE9Patches=c;b.fn.textext.addPatch("ie9",c);b=c.prototype;b.init=function(b){if(-1!=navigator.userAgent.indexOf("MSIE 9"))b.on({postInvalidate:this.onPostInvalidate})};b.onPostInvalidate=function(){var b=this.input(),c=b.val();b.val(Math.random());b.val(c)}})(jQuery);
(function(b){function c(){}b.fn.textext.TextExtAjax=c;b.fn.textext.addPlugin("ajax",c);var d=c.prototype,f={ajax:{typeDelay:0.5,loadingMessage:"Loading...",loadingDelay:0.5,cacheResults:!1,dataCallback:null}};d.init=function(b){this.baseInit(b,f);this.on({getSuggestions:this.onGetSuggestions});this._suggestions=null};d.load=function(e){var c=this,d=c.opts("ajax.data.callback")||function(b){return{q:b}},d=b.extend(!0,{data:d(e),success:function(b){c.onComplete(b,e)},error:function(b,c){console.error(c,
e)}},c.opts("ajax"));b.ajax(d)};d.onComplete=function(b,c){var d=b;this.dontShowLoading();!0==this.opts("ajax.cache.results")&&(this._suggestions=b,d=this.itemManager().filter(b,c));this.trigger("setSuggestions",{result:d})};d.dontShowLoading=function(){this.stopTimer("loading")};d.showLoading=function(){var b=this;b.dontShowLoading();b.startTimer("loading",b.opts("ajax.loading.delay"),function(){b.trigger("showDropdown",function(c){c.clearItems();c.addDropdownItem(b.opts("ajax.loading.message")).addClass("text-loading")})})};
d.onGetSuggestions=function(b,c){var d=this,m=d._suggestions,f=(c||{}).query||"";if(m&&!0===d.opts("ajax.cache.results"))return d.onComplete(m,f);d.startTimer("ajax",d.opts("ajax.type.delay"),function(){d.showLoading();d.load(f)})}})(jQuery);
(function(b){function c(){}b.fn.textext.TextExtArrow=c;b.fn.textext.addPlugin("arrow",c);var d=c.prototype,f={html:{arrow:'<div class="text-arrow"/>'}};d.init=function(e){var c=this;c.baseInit(e,f);c._arrow=e=b(c.opts("html.arrow"));c.core().wrapElement().append(e);e.bind("click",function(b){c.onArrowClick(b)})};d.onArrowClick=function(b){this.trigger("toggleDropdown");this.core().focusInput()}})(jQuery);
(function(b){function c(){}b.fn.textext.TextExtAutocomplete=c;b.fn.textext.addPlugin("autocomplete",c);var d=c.prototype,f={autocomplete:{enabled:!0,dropdown:{position:"below",maxHeight:"100px"}},html:{dropdown:'<div class="text-dropdown"><div class="text-list"/></div>',suggestion:'<div class="text-suggestion"><span class="text-label"/></div>'}};d.init=function(e){var c=this;c.baseInit(e,f);e=c.input();var d;!0===c.opts("autocomplete.enabled")&&(c.on({blur:c.onBlur,anyKeyUp:c.onAnyKeyUp,deleteKeyUp:c.onAnyKeyUp,
backspaceKeyPress:c.onBackspaceKeyPress,enterKeyPress:c.onEnterKeyPress,escapeKeyPress:c.onEscapeKeyPress,setSuggestions:c.onSetSuggestions,showDropdown:c.onShowDropdown,hideDropdown:c.onHideDropdown,toggleDropdown:c.onToggleDropdown,postInvalidate:c.positionDropdown,getFormData:c.onGetFormData,downKeyDown:c.onDownKeyDown,upKeyDown:c.onUpKeyDown}),d=b(c.opts("html.dropdown")),d.insertAfter(e),c.on(d,{mouseover:c.onMouseOver,mousedown:c.onMouseDown,click:c.onClick}),d.css("maxHeight",c.opts("autocomplete.dropdown.maxHeight")).addClass("text-position-"+
c.opts("autocomplete.dropdown.position")),b(c).data("container",d),b(document.body).click(function(b){c.isDropdownVisible()&&!c.withinWrapElement(b.target)&&c.trigger("hideDropdown")}),c.positionDropdown())};d.containerElement=function(){return b(this).data("container")};d.onMouseOver=function(e){e=b(e.target).closest(".text-suggestion");e.is(".text-suggestion")&&(this.clearSelected(),e.addClass("text-selected"))};d.onMouseDown=function(b){this.containerElement().data("mousedownOnAutocomplete",!0)};
d.onClick=function(e){e=b(e.target).closest(".text-label");(e.is(".text-suggestion")||e.is(".text-label"))&&this.trigger("enterKeyPress");this.core().hasPlugin("tags")&&this.val("")};d.onBlur=function(b){b=this.containerElement();var c=!0===b.data("mousedownOnAutocomplete");this.isDropdownVisible()&&(c?this.core().focusInput():this.trigger("hideDropdown"));b.removeData("mousedownOnAutocomplete")};d.onBackspaceKeyPress=function(b){(0<this.val().length||this.isDropdownVisible())&&this.getSuggestions()};
d.onAnyKeyUp=function(b,c){var d=null!=this.opts("keys."+c);0<this.val().length&&!d&&this.getSuggestions()};d.onDownKeyDown=function(b){this.isDropdownVisible()?this.toggleNextSuggestion():this.getSuggestions()};d.onUpKeyDown=function(b){this.togglePreviousSuggestion()};d.onEnterKeyPress=function(b){this.isDropdownVisible()&&this.selectFromDropdown()};d.onEscapeKeyPress=function(b){this.isDropdownVisible()&&this.trigger("hideDropdown")};d.positionDropdown=function(){var b=this.containerElement(),
c=this.opts("autocomplete.dropdown.position"),d=this.core().wrapElement().outerHeight(),m={};m["above"===c?"bottom":"top"]=d+"px";b.css(m)};d.suggestionElements=function(){return this.containerElement().find(".text-suggestion")};d.setSelectedSuggestion=function(e){if(e){var c=this.suggestionElements(),d=c.first(),m,f;this.clearSelected();for(f=0;f<c.length;f++)if(m=b(c[f]),this.itemManager().compareItems(m.data("text-suggestion"),e)){d=m.addClass("text-selected");break}d.addClass("text-selected");
this.scrollSuggestionIntoView(d)}};d.selectedSuggestionElement=function(){return this.suggestionElements().filter(".text-selected").first()};d.isDropdownVisible=function(){return!0===this.containerElement().is(":visible")};d.onGetFormData=function(b,c,d){b=this.val();c[100]=this.formDataObject(b,b)};d.initPriority=function(){return 200};d.onHideDropdown=function(b){this.hideDropdown()};d.onToggleDropdown=function(b){this.trigger(this.containerElement().is(":visible")?"hideDropdown":"showDropdown")};
d.onShowDropdown=function(e,c){var d=this.selectedSuggestionElement().data("text-suggestion");if(!this._suggestions)return this.trigger("getSuggestions");b.isFunction(c)?c(this):(this.renderSuggestions(this._suggestions),this.toggleNextSuggestion());this.showDropdown(this.containerElement());this.setSelectedSuggestion(d)};d.onSetSuggestions=function(b,c){var d=this._suggestions=c.result;!1!==c.showHideDropdown&&this.trigger(null===d||0===d.length?"hideDropdown":"showDropdown")};d.getSuggestions=function(){var b=
this.val();this._previousInputValue!=b&&(""==b&&(current=null),this._previousInputValue=b,this.trigger("getSuggestions",{query:b}))};d.clearItems=function(){this.containerElement().find(".text-list").children().remove()};d.renderSuggestions=function(e){var c=this;c.clearItems();b.each(e||[],function(b,e){c.addSuggestion(e)})};d.showDropdown=function(){this.containerElement().show()};d.hideDropdown=function(){var b=this.containerElement();this._previousInputValue=null;b.hide()};d.addSuggestion=function(b){var c=
this.opts("autocomplete.render");this.addDropdownItem(c?c.call(this,b):this.itemManager().itemToString(b)).data("text-suggestion",b)};d.addDropdownItem=function(e){var c=this.containerElement().find(".text-list"),d=b(this.opts("html.suggestion"));d.find(".text-label").html(e);c.append(d);return d};d.clearSelected=function(){this.suggestionElements().removeClass("text-selected")};d.toggleNextSuggestion=function(){var b=this.selectedSuggestionElement(),c;0<b.length?(c=b.next(),0<c.length&&b.removeClass("text-selected")):
c=this.suggestionElements().first();c.addClass("text-selected");this.scrollSuggestionIntoView(c)};d.togglePreviousSuggestion=function(){var b=this.selectedSuggestionElement().prev();0!=b.length&&(this.clearSelected(),b.addClass("text-selected"),this.scrollSuggestionIntoView(b))};d.scrollSuggestionIntoView=function(b){var c=b.outerHeight(),d=this.containerElement(),m=d.innerHeight(),f=d.scrollTop();b=(b.position()||{}).top;var p=null,l=parseInt(d.css("paddingTop"));null!=b&&(b+c>m&&(p=b+f+c-m+l),0>
b&&(p=b+f-l),null!=p&&d.scrollTop(p))};d.selectFromDropdown=function(){var b=this.selectedSuggestionElement().data("text-suggestion");b&&(this.val(this.itemManager().itemToString(b)),this.core().getFormData());this.trigger("hideDropdown")};d.withinWrapElement=function(b){return 0<this.core().wrapElement().find(b).size()}})(jQuery);
(function(b){function c(){}b.fn.textext.TextExtFilter=c;b.fn.textext.addPlugin("filter",c);b=c.prototype;var d={filter:{enabled:!0,items:null}};b.init=function(b){this.baseInit(b,d);this.on({getFormData:this.onGetFormData,isTagAllowed:this.onIsTagAllowed,setSuggestions:this.onSetSuggestions});this._suggestions=null};b.onGetFormData=function(b,e,c){b=this.val();c="";this.core().hasPlugin("tags")||(this.isValueAllowed(b)&&(c=b),e[300]=this.formDataObject(b,c))};b.isValueAllowed=function(b){var e=this.opts("filterItems")||
this._suggestions||[],c=this.itemManager(),d=!this.opts("filter.enabled"),m;for(m=0;m<e.length&&!d;m++)c.compareItems(b,e[m])&&(d=!0);return d};b.onIsTagAllowed=function(b,e){e.result=this.isValueAllowed(e.tag)};b.onSetSuggestions=function(b,e){this._suggestions=e.result}})(jQuery);
(function(b){function c(){}b.fn.textext.TextExtFocus=c;b.fn.textext.addPlugin("focus",c);b=c.prototype;var d={html:{focus:'<div class="text-focus"/>'}};b.init=function(b){this.baseInit(b,d);this.core().wrapElement().append(this.opts("html.focus"));this.on({blur:this.onBlur,focus:this.onFocus});this._timeoutId=0};b.onBlur=function(b){var e=this;clearTimeout(e._timeoutId);e._timeoutId=setTimeout(function(){e.getFocus().hide()},100)};b.onFocus=function(b){clearTimeout(this._timeoutId);this.getFocus().show()};
b.getFocus=function(){return this.core().wrapElement().find(".text-focus")}})(jQuery);
(function(b){function c(){}b.fn.textext.TextExtPrompt=c;b.fn.textext.addPlugin("prompt",c);var d=c.prototype,f={prompt:"Awaiting input...",html:{prompt:'<div class="text-prompt"/>'}};d.init=function(e){var c;this.baseInit(e,f);c=b(this.opts("html.prompt"));b(this).data("container",c);this.core().wrapElement().append(c);this.setPrompt(this.opts("prompt"));(c=e.input().attr("placeholder"))||(c=this.opts("prompt"));e.input().attr("placeholder","");c&&this.setPrompt(c);0<b.trim(this.val()).length&&this.hidePrompt();
this.on({blur:this.onBlur,focus:this.onFocus,postInvalidate:this.onPostInvalidate,postInit:this.onPostInit})};d.onPostInit=function(b){this.invalidateBounds()};d.onPostInvalidate=function(b){this.invalidateBounds()};d.invalidateBounds=function(){var b=this.input();this.containerElement().css({paddingLeft:b.css("paddingLeft"),paddingTop:b.css("paddingTop")})};d.onBlur=function(b){var c=this;c.startTimer("prompt",0.1,function(){c.showPrompt()})};d.showPrompt=function(){var c=this.input();0!==b.trim(this.val()).length||
c.is(":focus")||this.containerElement().removeClass("text-hide-prompt")};d.hidePrompt=function(){this.stopTimer("prompt");this.containerElement().addClass("text-hide-prompt")};d.onFocus=function(b){this.hidePrompt()};d.setPrompt=function(b){this.containerElement().text(b)};d.containerElement=function(){return b(this).data("container")}})(jQuery);
(function(b){function c(){}b.fn.textext.TextExtSuggestions=c;b.fn.textext.addPlugin("suggestions",c);b=c.prototype;var d={suggestions:null};b.init=function(b){this.baseInit(b,d);this.on({getSuggestions:this.onGetSuggestions,postInit:this.onPostInit})};b.setSuggestions=function(b,c){this.trigger("setSuggestions",{result:b,showHideDropdown:!1!=c})};b.onPostInit=function(b){this.setSuggestions(this.opts("suggestions"),!1)};b.onGetSuggestions=function(b,c){var d=this.opts("suggestions");d.sort();this.setSuggestions(this.itemManager().filter(d,
c.query))}})(jQuery);
(function(b){function c(){}b.fn.textext.TextExtTags=c;b.fn.textext.addPlugin("tags",c);var d=c.prototype,f="text-tag",e="."+f,g=".text-label",h={tags:{enabled:!0,items:null},html:{tags:'<div class="text-tags"/>',tag:'<div class="text-tag"><div class="text-button"><span class="text-label"/><a class="text-remove"/></div></div>'}};d.init=function(c){this.baseInit(c,h);c=this.input();var e;this.opts("tags.enabled")&&(e=b(this.opts("html.tags")),c.after(e),b(this).data("container",e),this.on({enterKeyPress:this.onEnterKeyPress,
backspaceKeyDown:this.onBackspaceKeyDown,preInvalidate:this.onPreInvalidate,postInit:this.onPostInit,getFormData:this.onGetFormData}),this.on(e,{click:this.onClick,mousemove:this.onContainerMouseMove}),this.on(c,{mousemove:this.onInputMouseMove}));this._originalPadding={left:parseInt(c.css("paddingLeft")||0),top:parseInt(c.css("paddingTop")||0)};this._paddingBox={left:0,top:0};this.updateFormCache()};d.containerElement=function(){return b(this).data("container")};d.onPostInit=function(b){this.addTags(this.opts("tags.items"))};
d.onGetFormData=function(b,c,e){b=13===e?"":this.val();c[200]=this.formDataObject(b,this._formData)};d.initPriority=function(){return 100};d.onInputMouseMove=function(b){this.toggleZIndex(b)};d.onContainerMouseMove=function(b){this.toggleZIndex(b)};d.onBackspaceKeyDown=function(b){b=this.tagElements().last();0==this.val().length&&this.removeTag(b)};d.onPreInvalidate=function(b){b=this.tagElements().last();var c=b.position();0<b.length?c.left+=b.innerWidth():c=this._originalPadding;this._paddingBox=
c;this.input().css({paddingLeft:c.left,paddingTop:c.top})};d.onClick=function(c){function d(b,c){r.data(f,b);r.find(g).text(h.itemManager().itemToString(b));h.updateFormCache();l.getFormData();l.invalidateBounds();c&&l.focusInput()}var h=this,l=h.core();c=b(c.target);var n=0,r;c.is(".text-tags")?n=1:c.is(".text-remove")?(h.removeTag(c.parents(e+":first")),n=1):c.is(g)&&(r=c.parents(e+":first"),h.trigger("tagClick",r,r.data(f),d));n&&l.focusInput()};d.onEnterKeyPress=function(b){b=this.val();b=this.itemManager().stringToItem(b);
this.isTagAllowed(b)&&(this.addTags([b]),this.core().focusInput())};d.updateFormCache=function(){var c=[];this.tagElements().each(function(){c.push(b(this).data(f))});this._formData=c};d.toggleZIndex=function(b){var c=this.input().offset(),e=b.clientX-c.left,d=b.clientY-c.top,g=this._paddingBox;b=this.containerElement();c=b.is(".text-tags-on-top");e=e>g.left&&d>g.top;if(!c&&!e||c&&e)b[(c?"remove":"add")+"Class"]("text-tags-on-top")};d.tagElements=function(){return this.containerElement().find(e)};
d.isTagAllowed=function(b){b={tag:b,result:!0};this.trigger("isTagAllowed",b);return!0===b.result};d.addTags=function(b){if(b&&0!=b.length){var c=this.core(),e=this.containerElement(),d,g;for(d=0;d<b.length;d++)(g=b[d])&&this.isTagAllowed(g)&&e.append(this.renderTag(g));this.updateFormCache();c.getFormData();c.invalidateBounds()}};d.getTagElement=function(c){var e=this.tagElements(),d,g;for(d=0;d<e.length,g=b(e[d]);d++)if(this.itemManager().compareItems(g.data(f),c))return g};d.removeTag=function(c){var e=
this.core(),d;c instanceof b?(d=c,c.data(f)):d=this.getTagElement(c);d.remove();this.updateFormCache();e.getFormData();e.invalidateBounds()};d.renderTag=function(c){var e=b(this.opts("html.tag"));e.find(".text-label").text(this.itemManager().itemToString(c));e.data(f,c);return e}})(jQuery);
(function(b,c){"$:nomunge";var d=b.jQuery||b.Cowboy||(b.Cowboy={}),f;d.throttle=f=function(b,g,h,f){function k(){function d(){l=+new Date;h.apply(q,v)}function k(){p=c}var q=this,u=+new Date-l,v=arguments;f&&!p&&d();p&&clearTimeout(p);f===c&&u>b?d():!0!==g&&(p=setTimeout(f?k:d,f===c?b-u:b))}var p,l=0;"boolean"!==typeof g&&(f=h,h=g,g=c);d.guid&&(k.guid=h.guid=h.guid||d.guid++);return k};d.debounce=function(b,d,h){return h===c?f(b,d,!1):f(b,h,!1!==d)}})(this);
MessageBundle={en:{"ajax.loading":"loading...","ajax.error":"network error,please try later",required:"please input value","required.only.one":"{0} are required only one","required.at.least.one":"{0} are required at least one","selection.required":"please select",phone:"please input valid phone number",email:"please input valid email",regex:"please input valid value",integer:"must be a integer","integer.positive":"must be a positive integer","double":"must be a decimal","double.positive":"must be a positive decimal",
"save.and.create":"save and add","no.selection":"no selection","no.modification":"no modification",select:"please select","confirm.delete":"are you sure to delete?","confirm.save":"are you sure to save?","confirm.exit":"you have unsaved modification,are you sure to exit?","confirm.action":"please confirm this action?","unsupported.browser":"unsupported browser","action.denied":"requested action denied","maximum.exceeded":"{0} , exceed maximum {1}","max.rows.reached":"reached max rows : {0}","pattern.coords.invalid":"coords should be between {0} and {1}",
"data.invalid":"data invalid,please check it.","repeat.not.matched":"repeat match failed"},zh_CN:{"ajax.loading":"\u6b63\u5728\u52a0\u8f7d...","ajax.error":"\u9519\u8bef,\u8bf7\u7a0d\u540e\u518d\u8bd5",required:"\u8bf7\u586b\u5199","required.only.one":"{0}\u5fc5\u987b\u8981\u6709\u4e14\u53ea\u6709\u4e00\u4e2a\u4e0d\u4e3a\u7a7a","required.at.least.one":"{0}\u81f3\u5c11\u8981\u4e00\u4e2a\u4e0d\u4e3a\u7a7a","selection.required":"\u8bf7\u9009\u62e9",email:"email\u4e0d\u5408\u6cd5",regex:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u683c\u5f0f",
phone:"\u8bf7\u586b\u5199\u6b63\u786e\u7684\u53f7\u7801",integer:"\u8bf7\u586b\u5199\u6574\u6570","integer.positive":"\u8bf7\u586b\u5199\u6b63\u6574\u6570","double":"\u8bf7\u586b\u5199\u6570\u5b57","double.positive":"\u8bf7\u586b\u5199\u5927\u4e8e\u96f6\u7684\u6570\u503c","save.and.create":"\u4fdd\u5b58\u5e76\u65b0\u5efa","no.selection":"\u6ca1\u6709\u9009\u4e2d","no.modification":"\u6ca1\u6709\u66f4\u6539",add:"\u6dfb\u52a0",remove:"\u5220\u9664",browse:"\u6d4f\u89c8\u6587\u4ef6",select:"\u8bf7\u9009\u62e9",
pick:"\u8bf7\u6311\u9009",save:"\u4fdd\u5b58",restore:"\u8fd8\u539f","import":"\u5bfc\u5165",cancel:"\u53d6\u6d88",error:"\u9519\u8bef",success:"\u64cd\u4f5c\u6210\u529f",confirm:"\u786e\u5b9a","confirm.delete":"\u786e\u5b9a\u8981\u5220\u9664?","confirm.save":"\u786e\u5b9a\u8981\u4fdd\u5b58?","confirm.exit":"\u6709\u6539\u52a8\u672a\u4fdd\u5b58,\u786e\u5b9a\u8981\u79bb\u5f00?","confirm.action":"\u8bf7\u786e\u8ba4\u6b64\u64cd\u4f5c","true":"\u662f","false":"\u5426","unsupported.browser":"\u4f60\u4f7f\u7528\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u8be5\u529f\u80fd",
"action.denied":"\u4f60\u62d2\u7edd\u4e86\u8bf7\u6c42","maximum.exceeded":"{0} ,\u8d85\u8fc7\u6700\u5927\u9650\u5236\u6570{1}","max.rows.reached":"\u5df2\u7ecf\u8fbe\u5230\u4e86\u6700\u5927\u884c\u6570: {0}","pattern.coords.invalid":"\u5750\u6807\u6570\u5fc5\u987b\u5728{0}\u548c{1}\u4e4b\u95f4","data.invalid":"\u6570\u636e\u9519\u8bef,\u8bf7\u68c0\u67e5","repeat.not.matched":"\u4e24\u6b21\u8f93\u5165\u4e0d\u4e00\u81f4",other:"\u5176\u4ed6"},get:function(){var b=arguments[0],c=MessageBundle.lang(),
c=MessageBundle[c][b];"undefined"==typeof c&&(c=b);for(b=1;b<arguments.length;b++)c=c.replace("{"+(b-1)+"}",arguments[b]);return c},lang:function(){var b=$.cookie("locale")||navigator.language||navigator.browserLanguage||"",c=b.indexOf("-");0<c&&(b=b.substring(0,c)+"_"+b.substring(c+1).toUpperCase());MessageBundle[b]||(c=b.indexOf("_"),0<c&&(b=b.substring(0,c)),MessageBundle[b]||(b="en"));return b},shortLang:function(){var b=MessageBundle.lang(),c=b.indexOf("_");0<c&&(b=b.substring(0,c));return b}};
var MODERN_BROWSER=!$.browser.msie||8<$.browser.version;
(function(){var b=document.domain;if(!b.match(/^(\d+\.){3}\d+$/)){b=b.split(".");try{2<b.length&&(document.domain=b[b.length-2]+"."+b[b.length-1])}catch(c){3<b.length&&(document.domain=b[b.length-3]+"."+b[b.length-2]+"."+b[b.length-1])}}$.ajaxSettings.traditional=!0;var d=$.ajax;MODERN_BROWSER&&($.ajax=function(b){b.url=UrlUtils.makeSameOrigin(b.url);b.xhrFields={withCredentials:!0};return d(b)});if("undefined"!=typeof $.rc4EncryptStr&&"false"!=$('meta[name="pe"]').attr("content")){var f=$.param;
$.param=function(b,c){(jQuery.isArray(b)||b.jquery)&&jQuery.each(b,function(){if(/password$/.test(this.name.toLowerCase()))try{var b=$.cookie("T"),b=b.substring(15,25);this.value=$.rc4EncryptStr(encodeURIComponent(this.value+b),b)}catch(c){}});return f(b,c)}}})();
Indicator={text:"",show:function(b){$("#indicator").length||$('<div id="indicator"></div>').appendTo(document.body);var c=$("#indicator");b&&c.hasClass("loading")&&c.removeClass("loading");b||c.hasClass("loading")||c.addClass("loading");c.html(Indicator.text||MessageBundle.get("ajax.loading"));c.show();Indicator.text=""},showError:function(){Indicator.text=MessageBundle.get("ajax.error");Indicator.show(!0)},hide:function(){Indicator.text="";$("#indicator")&&$("#indicator").hide()}};
UrlUtils={extractDomain:function(b){if(UrlUtils.isAbsolute(b)){b=b.replace(/:\d+/,"");b=b.substring(b.indexOf("://")+3);var c=b.indexOf("/");0<c&&(b=b.substring(0,c));return b}return document.location.hostname},isSameDomain:function(b,c){c=c||document.location.href;var d=UrlUtils.extractDomain(b),f=UrlUtils.extractDomain(c);return d==f},isSameOrigin:function(b,c){c=c||document.location.href;var d=UrlUtils.extractDomain(b),f=UrlUtils.extractDomain(c);if($.browser.msie&&d!=f)return!1;d=d.split(".");
f=f.split(".");return d[d.length-1]==f[f.length-1]&&d[d.length-2]==f[f.length-2]},makeSameOrigin:function(b,c){c=c||document.location.href;return UrlUtils.isSameOrigin(b,c)?b:c.substring(0,c.indexOf("/",c.indexOf("://")+3))+CONTEXT_PATH+"/webproxy/"+b},isAbsolute:function(b){if(!b)return!1;b=b.indexOf("://");return 4==b||5==b},absolutize:function(b){if(UrlUtils.isAbsolute(b))return b;var c=document.location.href,d=c.indexOf("://");return 0==b.length||0==b.indexOf("/")?c.substring(0,c.indexOf("/",
d+3))+CONTEXT_PATH+b:c.substring(0,c.lastIndexOf("/")+1)+b}};
Message={compose:function(b,c){return'<div class="'+c+'"><a class="close" data-dismiss="alert">&times;</a>'+b+"</div>"},showMessage:function(){Message.showActionMessage(MessageBundle.get.apply(this,arguments))},showError:function(){Message.showActionError(MessageBundle.get.apply(this,arguments))},showActionError:function(b,c){Message.showActionMessage(b,c,!0)},showActionMessage:function(b,c,d){if(b){if("string"==typeof b){var f=[];f.push(b);b=f}for(var f="",e=0;e<b.length;e++)f+=Message.compose(b[e],
d?"action-error alert alert-error":"action-message alert alert-info");f&&(b=$("#content"),$(".ui-dialog:visible").length&&(b=$(".ui-dialog:visible .ui-dialog-content")),$(".modal:visible").length&&(b=$(".modal:visible .modal-body")),$("#message",b).length||$('<div id="message"></div>').prependTo(b),b=$("#message",b),d&&c&&"FORM"==$(c).prop("tagName")&&($(c).attr("id")||$(c).attr("id","form"+(new Date).getTime()),d=$(c).attr("id"),0==$("#"+d+"_message").length&&$('<div id="'+d+'_message" class="message-container"></div>').insertBefore(c),
b=$("#"+d+"_message")),b.html(f),_observe(b),$("html,body").animate({scrollTop:b.offset().top-50},100))}},showFieldError:function(b,c,d){c=c||MessageBundle.get(d);if(b&&$(b).length)if(b=$(b),d=b.closest(".control-group").parent(".tab-pane"),d.length&&!d.hasClass("active")&&$('a[href$="#'+d.attr("id")+'"]').tab("show"),d=b.closest(".control-group"),d.addClass("error"),$(".field-error",b.parent()).remove(),b.hasClass("sqleditor")?b=b.next(".preview"):b.hasClass("chzn-done")&&(b=b.next(".chzn-container")),
b.is(":visible")){$(b).parent().css("position","relative");c=$('<div class="field-error field-error-popover"><div class="field-error-content">'+c+'<a class="remove pull-right" href="#">&times;</a></div><div>').insertAfter(b);$('<div class="field-error-arrow"/>').html('<div class="line10">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line1">\x3c!-- --\x3e</div>').appendTo(c);
var f=b.width();c.height();d=b.position().top;b=b.position().left+f-30;c.css({top:d+"px",left:b+"px",marginTop:"-38px",opacity:0});c.animate({opacity:0.8});c.css({marginTop:-c.height()+"px"})}else b.is('[type="hidden"]')?(f=b.parent(".listpick,.treeselect"),f.length&&!f.is(".control-group")?(d.removeClass("error"),$('<span class="field-error">'+c+"</span>").appendTo(f)):d.length?$('<span class="field-error">'+c+"</span>").appendTo($(".controls",d)):b.next(".listpick,.treeselect").length?$('<span class="field-error">'+
c+"</span>").insertAfter(b.next()):Message.showActionError(c)):Message.showActionError(c);else Message.showActionError(c)}};
Form={focus:function(b){for(var c=$(":input:visible",b).get(),d=0;d<c.length;d++)if($(".field-error",$(c[d]).parent()).length){setTimeout(function(){$(c[d]).focus()},50);break}},clearError:function(b){"FORM"==$(b).prop("tagName")?($(".control-group.error",b).removeClass("error"),$(".field-error",b).fadeIn().remove()):"DIV"==$(b).prop("tagName")?($(b).removeClass("error"),$(".field-error",b).fadeIn().remove()):($(b).closest(".control-group").removeClass("error"),$(".field-error",$(b).parent()).fadeIn().remove())},
validate:function(b){if("FORM"!=$(b).prop("tagName")){Form.clearError(b);if($(b).is('input[type="radio"]')&&$(b).hasClass("required")){var c=$('input[type="radio"][name="'+b.name+'"]',b.form),d=!1;$.each(c,function(b,c){c.checked&&(d=!0)});if(!d)return Message.showFieldError(b,null,"required"),!1}var f=!0,c=$(b).closest(".control-group").parent(".tab-pane"),e=c.length&&"none"!=$(b).css("display")&&!c.hasClass("active");if(!e||!$(".control-group.error",c.siblings(".tab-pane.active")).length){if((e||
$(b).is(':visible,[type="hidden"],.sqleditor,.chzn-done'))&&!$(b).prop("disabled"))if(c=$(b).val(),$(b).hasClass("required")&&!c)"SELECT"==$(b).prop("tagName")||$(b).is('[type="hidden"]')?Message.showFieldError(b,null,"selection.required"):Message.showFieldError(b,null,"required"),e&&$('a[href="#'+$(b).closest(".tab-pane").attr("id")+'"]').tab("show"),f=!1;else if($(b).hasClass("email")&&c&&!c.match(/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/))Message.showFieldError(b,null,"email"),f=!1;else if($(b).hasClass("regex")&&
c&&!c.match(RegExp($(b).data("regex"))))Message.showFieldError(b,null,"regex"),f=!1;else if($(b).hasClass("phone")&&c&&!c.match(/^[\d-]+$/))Message.showFieldError(b,null,"phone"),f=!1;else if(($(b).hasClass("integer")||$(b).hasClass("long"))&&c)!$(b).hasClass("positive")||c.match(/^[+]?\d*$/)&&($(b).hasClass("zero")||0!=parseInt(c))||(Message.showFieldError(b,null,"integer.positive"),f=!1),$(b).hasClass("positive")||c.match(/^[-+]?\d*$/)||(Message.showFieldError(b,null,"integer"),f=!1);else if($(b).hasClass("double")&&
c){if(!$(b).hasClass("positive")||c.match(/^[+]?\d+\.?(\d+)?$/)&&($(b).hasClass("zero")||0!=parseFloat(c))||(Message.showFieldError(b,null,"double.positive"),f=!1),$(b).hasClass("positive")||c.match(/^[-+]?\d+\.?(\d+)?$/)||(Message.showFieldError(b,null,"double"),f=!1),e=c.indexOf("."),-1<e){var g=c.substring(e+1),h=parseInt($(b).data("scale")||"2");g.length>h&&(c=c.substring(0,e+1)+g.substring(0,h),$(b).val(c))}}else $(b).hasClass("repeat")&&c!=$('[name="'+$(b).data("repeatwith")+'"]',$(b).closest("form")).val()&&
(Message.showFieldError(b,null,"repeat.not.matched"),f=!1);return f}}else{f=!0;$(":input",b).each(function(){Form.validate(this)||(f=!1)});f||Form.focus(b);var m={};$("[data-only-one-required-group]",b).each(function(){var b=$(this);if(b.is(':visible,[type="hidden"],.sqleditor,.chzn-done')&&!b.prop("disabled")){var c=b.data("only-one-required-group"),e=m[c];e||(e=[],m[c]=e);e.push(b)}});for(c in m){var e=m[c],k=0,p=[];$.each(e,function(b,c){p.push($(".control-label",c.closest(".control-group")).text());
c.val()&&k++});1!=k&&(f=!1,$.each(e,function(b,c){c.closest(".control-group").addClass("error")}),Message.showActionError(MessageBundle.get("required.only.one","["+p+"]"),b))}m={};$("[data-at-least-one-required-group]",b).each(function(){var b=$(this);if(b.is(':visible,[type="hidden"],.sqleditor,.chzn-done')&&!b.prop("disabled")){var c=b.data("at-least-one-required-group"),e=m[c];e||(e=[],m[c]=e);e.push(b)}});for(c in m)e=m[c],k=0,p=[],$.each(e,function(b,c){p.push($(".control-label",c.closest(".control-group")).text());
c.val()&&k++}),1>k&&(f=!1,$.each(e,function(b,c){c.closest(".control-group").addClass("error")}),Message.showActionError(MessageBundle.get("required.at.least.one","["+p+"]"),b));return f}}};
Ajax={defaultRepacement:"content",fire:function(b,c){if(!b)return!0;var d=b[c];"undefined"==typeof d&&(d=$(b).attr(c));if("undefined"==typeof d||!d)return!0;var f=[];if(2<arguments.length)for(var e=2;e<arguments.length;e++)f[e-2]=arguments[e];var g;if("function"==typeof d)g=d.apply(b,f);else{-1<d.indexOf("return")&&(d=d.replace("return",""));b._temp=function(){return eval(d)};try{g=b._temp()}catch(h){alert(h)}}return!1==g?!1:!0},handleResponse:function(b,c){if(b){var d=!1,f=c.target;f&&$(f).parents("div.ui-dialog").length&&
(c.quiet=!0);"string"!=typeof b||0!=b.indexOf("{")&&0!=b.indexOf("[")||(b=$.parseJSON(b));if("string"==typeof b){0<=b.indexOf("<title>")&&0<b.indexOf("</title>")&&(Ajax.title=b.substring(b.indexOf("<title>")+7,b.indexOf("</title>")),c.replaceTitle&&(document.title=Ajax.title),b=b.substring(b.indexOf("</title>")+8));var e=b.replace(/<script(.|\s)*?\/script>/g,""),g=$("<div/>").html(e),h=c.replacement,m;for(m in h){var k=$("#"+m);m!=Ajax.defaultRepacement||k.length||(k=$("body"));$(".intervaled",k).each(function(){clearInterval($(this).data("_interval"))});
if(!c.quiet&&k.length){var p=$(".pin",k),p=p.length?p.offset().top:k.offset().top;$("html,body").animate({scrollTop:p-50},100)}p=g.find("#"+h[m]);p.length?0==p.children().length?k.replaceWith(p):k.html(p.html()):g.find("#content").length?k.html(g.find("#content").html()):g.find("body").length?k.html(g.find("body").html()):k.html(e);c.quiet||"undefined"==typeof $.effects||k.effect("highlight");_observe(k)}g.remove();c.onsuccess&&c.onsuccess.apply(window);Ajax.fire(f,"onsuccess",b)}else if(Ajax.jsonResult=
b,b.fieldErrors||b.actionErrors?(d=!0,c.onerror&&c.onerror.apply(window),Ajax.fire(f,"onerror",b)):(c.onsuccess&&c.onsuccess.apply(window),Ajax.fire(f,"onsuccess",b)),setTimeout(function(){Message.showActionError(b.actionErrors,f);Message.showActionMessage(b.actionMessages,f)},500),b.fieldErrors)if(f){for(m in b.fieldErrors)Message.showFieldError(f[m],b.fieldErrors[m]);Form.focus(f)}else for(m in b.fieldErrors)Message.showActionError(b.fieldErrors[m]);f&&"FORM"==f.tagName&&(!d&&$(f).hasClass("disposable")?
setTimeout(function(){$(":input",f).prop("disabled",!0)},100):setTimeout(function(){$('button[type="submit"]',f).prop("disabled",!1);Captcha.refresh()},100),!d&&$(f).hasClass("reset")&&f.reset&&f.reset());Indicator.text="";Ajax.fire(f,"oncomplete",b)}},jsonResult:null,title:""};
function ajaxOptions(b){b=b||{};b.dataType||(b.dataType="text");b.headers||(b.headers={});$.extend(b.headers,{"X-Data-Type":b.dataType});for(var c=$(b.target),d={},c=(b.replacement||$(b.target).data("replacement")||("FORM"==$(b.target).prop("tagName")?$(c).attr("id"):null)||Ajax.defaultRepacement).split(","),f=[],e=0;e<c.length;e++){var g=c[e].split(":",2),h=2==g.length?g[1]:g[0];d[g[0]]=h;f.push(h!=Ajax.defaultRepacement?h:"_")}b.replacement=d;$.extend(b.headers,{"X-Fragment":f.join(",")});var m=
b.beforeSend;b.beforeSend=function(c){m&&m(c);Indicator.text=b.indicator;Ajax.fire(null,b.onloading)};var k=b.success;b.success=function(c,e,d){Ajax.handleResponse(c,b);!k||c.fieldErrors||c.actionErrors||k(c,e,d)};return b}function ajax(b){return $.ajax(ajaxOptions(b))}var CONTEXT_PATH=$('meta[name="context_path"]').attr("content")||"";"undefined"==typeof Initialization&&(Initialization={});"undefined"==typeof Observation&&(Observation={});
function _init(){var b=[],c;for(c in Initialization)"function"==typeof Initialization[c]&&b.push(c);b.sort();for(c=0;c<b.length;c++)Initialization[b[c]].call(this);_observe()}function _observe(b){b||(b=document);$(".chart,form.ajax,.ajaxpanel",b).each(function(b){$(this).attr("id")||$(this).attr("id",("a"+(b+Math.random())).replace(".","").substring(0,5))});var c=[],d;for(d in Observation)"function"==typeof Observation[d]&&c.push(d);c.sort();for(d=0;d<c.length;d++)Observation[c[d]].call(this,b)}$(_init);
Initialization.common=function(){$(document).ajaxStart(function(){Indicator.show()}).ajaxError(function(){Indicator.showError()}).ajaxSuccess(function(b,d){Indicator.hide();var f=d.getResponseHeader("X-Redirect-To");if(f){$("body").html('<div class="modal"><div class="modal-body"><div class="progress progress-striped active"><div class="bar" style="width: 50%;"></div></div></div></div>');f=UrlUtils.absolutize(f);try{var e=top.location.href;e&&UrlUtils.isSameDomain(e,f)?top.location.href=f:document.location.href=
f}catch(g){document.location.href=f}}}).keyup(function(b){27==b.keyCode&&($(".modal:visible").length?$(".modal:visible").last().find(".close").click():$(".ui-dialog:visible").length&&$(".ui-dialog:visible").last().find(".ui-dialog-titlebar-close").click())}).on("click","#message .close,.message-container .close",function(){$("#message,.message-container").each(function(b,d){$.trim($(d).text())||$(d).remove()})}).on("click",".removeonclick",function(){$(this).remove()}).on("click",".control-group .field-error .remove",
function(b){Form.clearError($(b.target).closest(".control-group"));return!1}).on("validate",":input",function(b){Form.validate(this)}).on("keyup","input,textarea",$.debounce(200,function(b){($(this).hasClass("required")||!$(this).hasClass("email")&&!$(this).hasClass("regex")&&!$(this).hasClass("repeat")&&13!=b.keyCode)&&$(this).val()&&Form.validate(this);return!0})).on("focusout","input,textarea",function(b){this.value!=this.defaultValue&&($(this).hasClass("email")||$(this).hasClass("regex")||$(this).hasClass("repeat")||
!$(this).hasClass("required"))&&Form.validate(this);return!0}).on("change","select",function(){Form.validate(this);return!0}).on("dblclick",".ui-dialog-titlebar",function(){Dialog.toggleMaximization($(".ui-dialog-content",$(this).closest(".ui-dialog")))}).on("mouseenter",".popover,.tooltip",function(){$(this).remove()}).on("click",".action-error strong.force-override",function(b){b=$(b.target).closest(".message-container");if(b.length){var d=b.next("form");$('input[type="hidden"].version',d).remove();
b.fadeOut().remove();d.submit()}else b=$('button[data-action="save"]:visible'),$("tr",b.closest("form")).removeData("version").removeAttr("data-version"),b.click()}).on("change","select",function(b){b=$(this);var d=b.find("option:eq(0)");!d.attr("value")&&d.text()&&(b.val()?b.removeClass("empty"):b.addClass("empty"))});$.alerts.okButton=MessageBundle.get("confirm");$.alerts.cancelButton=MessageBundle.get("cancel");Nav.init();Nav.activate(document.location.pathname);var b=document.location.hash;b&&
$(".nav-tabs").each(function(){var c=!1;$('a[data-toggle="tab"]',this).each(function(){var d=$(this);if(!c){var f=d.attr("data-target");f||(f=(f=d.attr("href"))&&f.replace(/.*(?=#[^\s]*$)/,""));f==b&&(c=!0,d.tab("show"),$target=$(f),$target.hasClass("ajaxpanel")&&$target.removeClass("manual"))}})});$(document.body).hasClass("render-location-qrcode")&&($('<div id="render-location-qrcode" style="width:15px;position:fixed;bottom:0;right:0;cursor:pointer;"><i class="glyphicon glyphicon-qrcode"></i></div>').appendTo(document.body),
$("#render-location-qrcode").click(function(){var b=$(this);b.hide();var d=$('<div class="modal" style="z-index:10000;"><div class="modal-close"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">\u00d7</button></div><div class="modal-body" style="max-height:600px;"><div class="location-qrcode">'+document.location.href+"</div></div></div>").appendTo(document.body);$(".location-qrcode",d).encodeqrcode();$("button.close",d).click(function(){d.remove();b.show()})}));-1!=document.location.search.indexOf("printpage=true")&&
(window.print(),setTimeout(function(){window.close()},1E3));$(".time[title]").length&&setInterval(function(){$(".time[title]").each(function(){var b=$(this);b.text(DateUtils.humanRead(b.attr("title")))})},6E4)};var HISTORY_ENABLED=MODERN_BROWSER&&("undefined"!=typeof history.pushState||"undefined"!=typeof $.history)&&"false"!=$('meta[name="history_enabled"]').attr("content");
if(HISTORY_ENABLED){var SESSION_HISTORY_SUPPORT="undefined"!=typeof history.pushState&&0!=document.location.hash.indexOf("#!/"),_historied_=!1;Initialization.history=function(){SESSION_HISTORY_SUPPORT?window.onpopstate=function(b){var c=document.location.href;Nav.activate(c);b.state&&ajax({url:c,replaceTitle:!0,replacement:b.state.replacement,cache:!1})}:$.history.init(function(b){if(!(!b&&!_historied_||b&&0>b.indexOf("!"))){var c=document.location.href;0<c.indexOf("#")&&(c=c.substring(0,c.indexOf("#")));
b.length&&(b=b.substring(1),UrlUtils.isSameDomain(b)&&CONTEXT_PATH&&(b=CONTEXT_PATH+b),c=b);_historied_=!0;ajax({url:c,cache:!0,replaceTitle:!0,success:function(){Nav.activate(c)}})}},{unescape:!0})}}
Observation.common=function(b){$("select",b).each(function(b){b=$(this);var c=b.find("option:eq(0)");c.attr("value")||!c.text()||b.val()||b.addClass("empty")});$(".controls .field-error",b).each(function(){var b=$(this).text(),c=$(":input",$(this).parent());$(this).remove();Message.showFieldError(c,b)});var c="FORM"==$(b).prop("tagName")&&$(b).hasClass("focus")?b:$(".focus:eq(0)",b);if("FORM"!=c.prop("tagName")&&c.attr("name"))c.focus();else for(var c=$(":input:visible",c).toArray(),d=0;d<c.length;d++){var f=
$(c[d]);if(f.attr("name")&&!f.val()){f.focus();break}}$("form",b).each(function(){$(this).hasClass("ajax")||$(this).submit(function(){$(".action-error").remove();return Form.validate(this)})});$('input[type="text"]',b).on("paste",function(){var b=$(this);setTimeout(function(){b.val($.trim(b.val()))},50)}).each(function(){var b=$(this);b.attr("autocomplete")||b.attr("autocomplete","off");if(!b.hasClass("unlimited")){var c=b.attr("maxlength");if(!c||4E3<c)b.hasClass("date")?b.attr("maxlength","10"):
b.hasClass("datetime")?b.attr("maxlength","19"):b.hasClass("time")?b.attr("maxlength","8"):b.hasClass("integer")?b.attr("maxlength","11"):b.hasClass("long")?b.attr("maxlength","20"):b.hasClass("double")?b.attr("maxlength","22"):b.attr("maxlength","255")}});MODERN_BROWSER&&$('input[type="checkbox"].custom,input[type="radio"].custom',b).each(function(b){$(this).hide();this.id||(this.id=("a"+(b+Math.random())).replace(".","").substring(0,9));$(this).next("lable.custom").length||$(this).after($('<label class="custom" for="'+
this.id+'"></label>'))});$(".linkage",b).each(function(){var b=$(this);b.data("originalclass",b.attr("class"));var c=$(".linkage_switch",b);$(".linkage_component",b).show();$(".linkage_component",b).not("."+c.val()).hide().filter(":input").val("");b.attr("class",b.data("originalclass")+" "+c.val());c.change(function(){var b=$(this).closest(".linkage"),c=$(this);$(".linkage_component",b).show();$(".linkage_component",b).not("."+c.val()).hide().filter(":input").val("");b.attr("class",b.data("originalclass")+
" "+c.val())})});$(":input.conjunct",b).change(function(){var b=$(this),c=$(this).closest("form"),d={},f=c.attr("action");-1<f.indexOf("/")?"save"==f.substring(f.lastIndexOf("/")+1)&&(f=f.substring(0,f.lastIndexOf("/"))+"/input"):"save"==f&&(f="input");var k=$('input[type=hidden][name$=".id"]',c);k.val()&&(d.id=k.val());d[b.attr("name")]=b.val();$("input[type=hidden]:not(.nocheck)",c).each(function(){d[$(this).attr("name")]=$(this).val()});ajax({global:!1,quiet:!0,type:b.data("method")||c.attr("method"),
url:f,data:d,target:c[0],replacement:b.data("replacement")})});"undefined"!=typeof $.fn.datetimepicker&&$("input.date,input.datetime,input.time",b).not("[readonly]").not("[disabled]").each(function(){var b=$(this),c={language:MessageBundle.lang().replace("_","-")};b.hasClass("datetime")?c.format=b.data("format")||"yyyy-MM-dd HH:mm:ss":b.hasClass("time")?(c.format=b.data("format")||"HH:mm:ss",c.pickDate=!1):(c.format=b.data("format")||"yyyy-MM-dd",c.pickTime=!1);b.datetimepicker(c).on("changeDate",
function(c){b.trigger("validate");(c=b.data("datetimepicker"))&&c.widget.is(":visible")&&c.hide()})});$("input.captcha",b).focus(function(){$(this).data("_captcha_")||($(this).after('<img class="captcha" src="'+this.id+'"/>'),$("img.captcha",b).click(Captcha.refresh),$(this).data("_captcha_",!0))});"undefined"!=typeof $.fn.treeTable&&$(".treeTable",b).each(function(){$(this).treeTable({initialState:$(this).hasClass("expanded")?"expanded":"collapsed"})});"undefined"!=typeof $.fn.chosen&&$(".chosen",
b).chosen({placeholder_text:MessageBundle.get("select"),no_results_text:" "});"undefined"!=typeof $.fn.htmlarea&&$("textarea.htmlarea",b).htmlarea({css:CONTEXT_PATH+"/assets/styles/ironrhino-min.css"});$('a[data-toggle="tab"]',b).on("shown",function(b){$this=$(b.target);b=$this.attr("data-target");b||(b=(b=$this.attr("href"))&&b.replace(/.*(?=#[^\s]*$)/,""));$target=$(b);$target.hasClass("ajaxpanel")&&$target.trigger("load")});$(".carousel",b).each(function(){var b=$(this);b.carousel((new Function("return "+
(b.data("options")||"{}")))())});$(":input[data-helpurl]",b).each(function(){var b=$(this),c='<a href="'+b.data("helpurl")+'" style="padding-left: 5px;" target="_blank"><span class="glyphicon glyphicon-question-sign"></span></a>',c=$(c).insertAfter(b);b.is("textarea")&&c.find("span").css("vertical-align","top")});$(".tiped",b).each(function(){var b=$(this),c={html:!0,trigger:b.data("trigger")||"hover",placement:b.data("placement")||"top"};!b.attr("title")&&b.data("tipurl")&&b.attr("title",MessageBundle.get("ajax.loading"));
b.bind("hover"==c.trigger?"mouseenter":c.trigger,function(){b.hasClass("_tiped")||(b.addClass("_tiped"),$.ajax({url:b.data("tipurl"),global:!1,dataType:"html",success:function(d){b.attr("data-original-title",d);b.tooltip(c).tooltip("show")}}))});b.is(":input")&&(c.trigger="focus",c.placement="right");b.tooltip(c)});$(".poped",b).each(function(){var b=$(this),c={html:!0,trigger:b.data("trigger")||"hover",placement:b.data("placement")||"right"};b.data("popurl")&&(!c.content&&b.data("popurl")&&(c.title=
MessageBundle.get("ajax.loading")),b.bind("hover"==c.trigger?"mouseenter":c.trigger,function(){b.hasClass("_poped")||(b.addClass("_poped"),$.ajax({url:b.data("popurl"),global:!1,dataType:"html",success:function(d){$("div.popover").remove();0<=d.indexOf("<title>")&&0<d.indexOf("</title>")&&b.attr("data-original-title",d.substring(d.indexOf("<title>")+7,d.indexOf("</title>")));0<=d.indexOf("<body")&&0<d.indexOf("</body>")&&b.attr("data-content",d.substring(d.indexOf(">",d.indexOf("<body")+5)+1,d.indexOf("</body>")));
b.popover(c).popover("show")}}))}));b.popover(c)});$(".btn-switch",b).each(function(){var b=$(this);b.children().css("cursor","pointer").click(function(){b.children().removeClass("active").css({"font-weight":"normal"});$(this).addClass("active").css({"font-weight":"bold"})})});$("a.popmodal",b).each(function(){var b=$(this),c=b.attr("href");-1<c.indexOf("/")&&(c=c.substring(c.lastIndexOf("/")+1));for(c+="_modal";$("#"+c).length;)c+="_";b.click(function(d){$("#"+c).length?b.hasClass("nocache")?$.get(b.data("originalhref"),
function(b){b=b.replace(/<script(.|\s)*?\/script>/g,"");b=$("<div/>").html(b);b=$("#"+c).find(".modal-body").html($("#content",b).html());_observe(b);$("#"+c).modal("show")}):$("#"+c).modal("show"):$.get(b.attr("href"),function(d){if("object"==typeof d)d.actionErrors?Message.showActionError(d.actionErrors):console.log(JSON.stringify(d));else{d=d.replace(/<script(.|\s)*?\/script>/g,"");var f=$("<div/>").html(d);d=$("title",f).html();var f=$("#content",f).html(),h=b.data("modalwidth");$('<div id="'+
c+'" class="modal hide fade in"'+(h?' style="width:'+h+';"':"")+'><div class="modal-header"><a class="close" data-dismiss="modal">&times;</a><h3 style="text-align:center;">'+d+'</h3></div><div class="modal-body" style="padding-top:40px;">'+f+"</div></div>").appendTo(document.body);_observe($("#"+c));$("form",$("#"+c)).each(function(){this.onsuccess=function(){$("#"+c).modal("hide")}});b.data("originalhref",b.attr("href")).attr("href","#"+c).attr("data-toggle","modal");$("#"+c).modal("show")}});return!1})});
"undefined"!=typeof swfobject&&($(".chart",b).each(function(){var b=$(this),c=b.attr("id"),d=b.width(),f=b.height(),k=b.data("url");0==k.indexOf("/")&&(k=document.location.protocol+"//"+document.location.host+k);c&&d&&f&&k||alert("id,width,height,data all required");swfobject.embedSWF(CONTEXT_PATH+"/assets/images/open-flash-chart.swf",c,d,f,"9.0.0",CONTEXT_PATH+"/assets/images/expressInstall.swf",{"data-file":encodeURIComponent(k),loading:MessageBundle.get("ajax.loading")},{wmode:"transparent"});
b.hasClass("intervaled")&&(b.removeClass("intervaled"),clearInterval(parseInt(b.data("_interval"))));b.data("interval")&&(d=setInterval(function(){b.data("quiet")?$.ajax({global:!1,url:k,dataType:"text",success:function(b){document.getElementById(c).load(b)}}):document.getElementById(c).reload(k)},parseInt(b.data("interval"))),b.addClass("intervaled").data("_interval",d))}),window.save_image=function(){var b=[];b.push("<html><head><title>Charts: Export as Image</title></head><body>");$("object[data]").each(function(){b.push('<img src="data:image/png;base64,'+
this.get_img_binary()+'"/>')});b.push("</body></html>");var c=window.open("","_blank");c.document.write(b.join(""));c.document.close()});$("a.ajax,form.ajax",b).each(function(){var b=this,c=ajaxOptions({target:b,onsuccess:function(c){c=$('input[type="hidden"].version',b);c.val(parseInt(c.val()||"0")+1)}});if("FORM"==this.tagName){var d={beforeSerialize:function(){$(".action-error").remove();if(!Form.validate(b)||!Ajax.fire(b,"onprepare"))return!1;Ajax.fire(b,"onbeforeserialize")},beforeSubmit:function(){Indicator.text=
$(b).data("indicator");$('button[type="submit"]',b).prop("disabled",!0);Ajax.fire(b,"onloading");var c=$(b),f=!1;c.hasClass("history")&&(f=!0);if(!1===d.pushState||c.parents(".ui-dialog,.tab-content").length)f=!1;if(f&&HISTORY_ENABLED){var f=c.attr("action"),g=f.indexOf("://");-1<g&&(f=f.substring(g+3),f=f.substring(f.indexOf("/")));var c=c.serializeArray(),l=[];c&&($.map(c,function(b,c){"resultPage.pageNo"==b.name?b.name="pn":"resultPage.pageSize"==b.name&&(b.name="ps");"check"==b.name||"keyword"==
b.name&&!b.value||"pn"==b.name&&"1"==b.value||"ps"==b.name&&"10"==b.value||l.push({name:b.name,value:b.value})}),(c=$.param(l))&&(f+=(0<f.indexOf("?")?"&":"?")+c));c=document.location.href;SESSION_HISTORY_SUPPORT?(history.replaceState({url:c},"",c),history.pushState(f,"",f)):(CONTEXT_PATH&&(f=f.substring(CONTEXT_PATH.length)),$.history.load("!"+f))}if(!1===Ajax.fire(b,"onbeforesubmit"))return!1},error:function(){Form.focus(b);b&&"FORM"==b.tagName&&setTimeout(function(){$('button[type="submit"]',b).prop("disabled",
!1)},100);Ajax.fire(b,"onerror")},success:function(b){Ajax.handleResponse(b,c)},headers:c.headers};$(this).hasClass("view")||$.extend(d.headers,{"X-Data-Type":"json"});$(this).bind("submit",function(c){c=$(this);var f=$(".clicked",c).removeClass("clicked");f.length||(f=$(":input:focus[type=submit]",c));if(f.hasClass("noajax"))return!0;if(f.hasClass("reload")||f.data("action"))d.pushState=!1;if("multipart/form-data"==$(this).attr("enctype")){var g=[];$('input[type="file"]',c).each(function(){var b=
this.files;if(b&&0<b.length)for(var c=0;c<b.length;c++)g.push(b[c])});d.target=b;$.ajaxupload(g,d)}else $(this).ajaxSubmit(d);return!1})}else $(this).click(function(){if(!Ajax.fire(b,"onprepare"))return!1;if(HISTORY_ENABLED&&$(this).hasClass("view")&&!$(this).hasClass("nohistory")&&($(this).hasClass("history")||!$(this).data("replacement"))){$(".ui-dialog:visible").children().remove();var c=this.href;if(UrlUtils.isSameDomain(c))if(c=c.substring(c.indexOf("://")+3),c=c.substring(c.indexOf("/")),SESSION_HISTORY_SUPPORT){var d=
document.location.href;history.replaceState({url:d},"",d);history.pushState({replacement:$(this).data("replacement"),url:c},"",c)}else return CONTEXT_PATH&&(c=c.substring(CONTEXT_PATH.length)),c=c.replace(/^.*#/,""),$.history.load("!"+c),!1}var f={target:this,url:this.href,type:$(this).data("method")||"GET",cache:$(this).hasClass("cache"),beforeSend:function(){$(".action-error").remove();Indicator.text=$(b).data("indicator");Ajax.fire(b,"onloading")},error:function(){Ajax.fire(b,"onerror")}};$(this).hasClass("view")?
$(this).data("replacement")||(f.replaceTitle=!0):$.extend(f.headers,{"X-Data-Type":"json"});f.onsuccess=function(){Nav.activate(f.url)};ajax(f);return!1})})};
var Nav={init:function(){$(document).on("click",".nav:not(.nav-tabs):not(.nav-list) li a",function(){$("li",$(this).closest(".nav")).removeClass("active");Nav.indicate($(this))})},activate:function(b){b=UrlUtils.absolutize(b);$(".nav:not(.nav-tabs):not(.nav-list) li").removeClass("active open");$(".nav:not(.nav-tabs):not(.nav-list) li a").each(function(){this.href!=b&&0!=b.indexOf(this.href+"?")||Nav.indicate($(this))})},indicate:function(b){var c=b.closest("li.dropdown");if(!c.length)$(b).closest("li").addClass("active"),
$("#nav-breadcrumb").remove();else if(!b.hasClass("dropdown-toggle")){c.addClass("active");var d=$("#nav-breadcrumb");d.length?d.html(""):d=$('<ul id="nav-breadcrumb" class="breadcrumb"/>').prependTo($("#content"));d.append("<li>"+c.children("a").text()+' <span class="divider">/</span></li>').append('<li class="active">'+b.text()+"</li>")}}},Dialog={adapt:function(b,c){var d=!1;if(c){d=c.document;c.contentDocument?d=c.contentDocument:c.contentWindow&&(d=c.contentWindow.document);$(b).dialog("option",
"title",d.title);$(b).dialog("option","minHeight",f);var f=$(d).height()+20;$(c).height(f);d=0<$("div.row",d).length}else $(b).dialog("option","title",Ajax.title),d=0<$("div.row",b).length;d&&b.dialog("option","width","90%");b.dialog("option","position","center");b.dialog("moveToTop")},toggleMaximization:function(b){var c=$(b).closest(".ui-dialog"),d=c.data("orginal-width");if(d)c.width(d),c.height(c.data("orginal-height")),c.removeData("orginal-width").removeData("orginal-height"),Dialog.adapt($(b));
else{c.data("orginal-width",c.width()+0.2).data("orginal-height",c.height()+0.2);var d=$(window).width()-10,f=$(window).height()-10;c.outerWidth(d);c.outerHeight()<f&&c.outerHeight(f);b.dialog("option","position","top")}}};Captcha={refresh:function(){$("img.captcha").each(function(){var b=this.src,c=b.lastIndexOf("&");0<c&&(b=b.substring(0,c));this.src=b+"&"+Math.random()});$("input.captcha").val("").focus()}};
ArrayUtils={unique:function(b){if(b){for(var c=[],d={},f=0,e;null!=(e=b[f]);f++)d[e]||(c.push(e),d[e]=!0);return c}}};
DateUtils={humanRead:function(b){"string"==typeof b&&(string=!0,b=new Date(b));var c=(new Date).getTime()-b.getTime();b=0<=c;c=(0>c?-c:c)/1E3;if(60>=c)return"1\u5206\u949f\u5185";if(3600>c)c=Math.floor(c/60),c=30==c?"\u534a\u4e2a\u5c0f\u65f6":c+"\u5206\u949f";else if(86400>c)var d=c/3600,c=Math.floor(d),d=Math.floor(3600*(d-c)/60),c=0==d?c+"\u4e2a\u5c0f\u65f6":30==d?c+"\u4e2a\u534a\u5c0f\u65f6":c+"\u4e2a\u5c0f\u65f6"+d+"\u5206\u949f";else c=2592E3>c?Math.floor(c/86400)+"\u5929":31104E3>c?Math.floor(c/
2592E3)+"\u4e2a\u6708":Math.floor(c/31104E3)+"\u5e74";return c+(b?"\u524d":"\u540e")},addDays:function(b,c){var d=!1;"string"==typeof b&&(d=!0,b=new Date(b));var f=b.getTime();b=new Date;b.setTime(f+864E5*c);return d?$.format.date(b,"yyyy-MM-dd"):b},getIntervalDays:function(b,c){"string"==typeof b&&(b=new Date(b));"string"==typeof c&&(c=new Date(c));return(c.getTime()-b.getTime())/864E5+1},isLeapYear:function(b){return 1==(new Date(b,1,29)).getMonth()},nextLeapDay:function(b){"string"==typeof b&&
(b=new Date(b));var c=b.getFullYear();if(DateUtils.isLeapYear(c)){var d=new Date(c,1,29);if(b.getTime()<=d.getTime())return d}for(;!DateUtils.isLeapYear(++c););return new Date(c,1,29)},isSpanLeapDay:function(b,c){"string"==typeof b&&(b=new Date(b));"string"==typeof c&&(c=new Date(c));return c.getTime()>=DateUtils.nextLeapDay(b).getTime()}};
(function(b){b.fn.checkavailable=function(){this.each(function(){var c=b(this);c.bind("checkavailable",function(){if(c.val()){var d=b("input[type=hidden]",c.closest("form")).not('[name^="__"]').not(".nocheck").add(c),f=c.data("checkurl");f||(f=c.closest("form").prop("action"),f=f.substring(0,f.lastIndexOf("/"))+"/checkavailable");ajax({global:!1,target:c.closest("form")[0],url:f,data:d.serialize()})}}).change(function(){c.addClass("dirty")}).blur(function(){c.hasClass("dirty")&&!c.next(".field-error").length&&
c.trigger("checkavailable")})});return this}})(jQuery);Observation.checkavailable=function(b){$(":input.checkavailable",b).checkavailable()};
Observation.tags=function(b){"undefined"!=typeof $.fn.textext&&(!$.browser.msie||"8"<$.browser.version)&&$("input.tags",b).each(function(){var b=$(this),d={prompt:"...",autocomplete:{dropdownMaxHeight:"200px",render:function(b){return"string"==typeof b?b:b.label?'<div value="'+b.value+'">'+b.label+"</div>":b.value}},ext:{core:{serializeData:function(b){return b.join(",")}},itemManager:{itemToString:function(b){return"string"==typeof b?b:b.value}},autocomplete:{showDropdown:function(){$(".text-suggestion",
this.containerElement()).length&&this.containerElement().show()},renderSuggestions:function(b){var c=this;c.clearItems();var d=[];$(".text-tags .text-label",c.container).each(function(){d.push($(this).text())});$.each(b||[],function(b,e){for(var f=c.itemManager().itemToString(e),g=!1,r=0;r<d.length;r++)if(d[r]==f){g=!0;break}g||c.addSuggestion(e)})}}}},f=b.val();f&&(0==f.indexOf('["')?d.tagsItems=$.parseJSON(f):d.tagsItems=f.split(","));if(b.data("source"))if(0!=b.data("source").indexOf("["))d.plugins=
"tags prompt focus autocomplete ajax arrow",d.ajax={global:!1,url:b.data("source"),cacheResults:!1,dataCallback:function(b){return{keyword:b}}};else{d.plugins="tags prompt focus autocomplete arrow";var e=(new Function("return "+b.data("source")))();b.bind("getSuggestions",function(b,c){var d=$(b.target).textext()[0],f=(c?c.query:"")||"";$(this).trigger("setSuggestions",{result:d.itemManager().filter(e,f)})})}else b.attr("list")&&$("#"+b.attr("list")).length?(d.plugins="tags prompt focus autocomplete arrow",
e=[],$("option",$("#"+b.attr("list"))).each(function(){e.push(this.value)}),b.bind("getSuggestions",function(b,c){var d=$(b.target).textext()[0],f=(c?c.query:"")||"";$(this).trigger("setSuggestions",{result:d.itemManager().filter(e,f)})})):d.plugins="tags prompt focus";b.val("").textext(d).bind("isTagAllowed",function(b,c){var d=[];$(".text-tags .text-label",this.container).each(function(){d.push($(this).text())});for(var e=0;e<d.length;e++)if(d[e]==c.tag){c.result=!1;break}});b.blur(function(){(b.hasClass("required")||
b.val())&&$(this).trigger("enterKeyPress").val("")})})};
(function(b){function c(c){return"undefined"!=typeof b.fieldValue?b.fieldValue(c):b(c).val()}function d(b,c,d){c=c.name;if("undefined"!=typeof FileReaderSync){var h=new BlobBuilder,m=new FileReaderSync;b=event.data;for(var k=0;k<b.length;k++)h.append("--"),h.append(d),h.append("\r\n"),h.append("Content-Disposition: form-data; name="),h.append(c),h.append("; filename="),h.append(b[k].name),h.append("\r\n"),h.append("Content-Type: "),h.append(b[k].type),h.append("\r\n\r\n"),h.append(m.readAsArrayBuffer(b[k])),
h.append("\r\n");h.append("--");h.append(d);h.append("--");return h.getBlob()}if(b[0].getAsBinary){h="";for(k=0;k<b.length;k++)h+="--"+d+"\r\n",h+="Content-Disposition: form-data; name="+c+"; filename="+b[k].name+"\r\n",h+="Content-Type: "+b[k].type+"\r\n\r\n",h+=b[k].getAsBinary()+"\r\n";return h+("--"+d+"--")}return null}b.ajaxupload=function(f,e){if(!f)return!1;var g={name:"file"};e=e||{};b.extend(g,e);e=g;if("function"==typeof e.beforeSerialize&&!1===e.beforeSerialize())return!1;var h;f.length&&
(e.progress?h=b(e.progress):(h=b("#_uploadprogress"),h.length||(h=b('<progress id="_uploadprogress" style="position: fixed;z-index: 10001;left: 45%;top: 0px;width: 100px;" min="0" max="100" value="0">0</progress>').appendTo(document.body))));var m=new XMLHttpRequest;(g=e.url)||(g=e.target&&"FORM"==e.target.tagName?e.target.action:document.location.href);m.open("POST",g);f.length||Indicator.show();g=e.headers||{};g["X-Requested-With"]||(g["X-Requested-With"]="XMLHttpRequest");for(var k in g)m.setRequestHeader(k,
g[k]);m.onreadystatechange=function(){if(4==m.readyState){if(200==m.status||304==m.status){f.length||Indicator.hide();var c=m.responseText;if(0==c.indexOf("[")||0==c.indexOf("{"))c=b.parseJSON(c);Ajax.handleResponse(c,e)}else f.length||Indicator.showError();"undefined"!=typeof e.complete&&e.complete(m)}};h&&h.length&&(m.onload=function(){h.val(100).html(100).remove()},"upload"in m&&(m.upload.onprogress=function(b){b.lengthComputable&&(b=b.loaded/b.total*100|0,h.val(b).html(b).show())}));if("string"==
typeof e.data)for(g=e.data.split("&"),e.data={},k=0;k<g.length;k++){var p=g[k].split("=",2);e.data[p[0]]=2==p.length?decodeURIComponent(p[1]):""}if(window.FormData){var l=new FormData;for(k=0;k<f.length;k++)l.append(e.name,f[k]);e.target&&"FORM"==e.target.tagName?b(":input",e.target).each(function(b,d){!this.disabled&&"file"!=this.type&&("checkbox"!=this.type&&"radio"!=this.type||this.checked)&&l.append(this.name,c(this))}):e.data&&b.each(e.data,function(b,c){l.append(b,c)});if("function"==typeof e.beforeSubmit&&
!1===e.beforeSubmit()||"function"==typeof e.beforeSend&&!1===e.beforeSend())return;m.send(l)}else{var n="xxxxxxxxx";m.setRequestHeader("Content-Type","multipart/form-data, boundary="+n);!window.BlobBuilder&&window.WebKitBlobBuilder&&(window.BlobBuilder=window.WebKitBlobBuilder);if("undefined"!=typeof FileReader&&"undefined"!=typeof BlobBuilder){for(k=0;k<f.length;k++){g=f[k];p=new FileReader;p.sourceFile=g;var r=0,n="xxxxxxxxx",q=new BlobBuilder;e.target&&"FORM"==e.target.tagName?b(":input",e.target).each(function(b,
d){if(!this.disabled&&"file"!=this.type&&("checkbox"!=this.type&&"radio"!=this.type||this.checked)){var e=new BlobBuilder;e.append("--");e.append(n);e.append("\r\n");e.append('Content-Disposition: form-data; name="');e.append(this.name);e.append('" ');e.append(c(this));e.append("\r\n");q.append(e.getBlob())}}):e.data&&b.each(e.data,function(b,c){var d=new BlobBuilder;d.append("--");d.append(n);d.append("\r\n");d.append('Content-Disposition: form-data; name="');d.append(b);d.append('" ');d.append(c);
d.append("\r\n");q.append(d.getBlob())});p.onload=function(b){var c=b.target.sourceFile,d=new BlobBuilder;d.append("--");d.append(n);d.append("\r\n");d.append("Content-Disposition: form-data; name=");d.append(e.name);d.append("; filename=");d.append(c.name);d.append("\r\n");d.append("Content-Type: ");d.append(c.type);d.append("\r\n\r\n");d.append(b.target.result);d.append("\r\n");q.append(d.getBlob());r++;r==f.length&&(q.append("--"),q.append(n),q.append("--"),"function"==typeof e.beforeSubmit&&!1===
e.beforeSubmit()||"function"==typeof e.beforeSend&&!1===e.beforeSend()||m.send(q.getBlob()))};p.readAsArrayBuffer(g)}return!0}if(q=d(f,e,n)){if("function"==typeof e.beforeSubmit&&!1===e.beforeSubmit()||"function"==typeof e.beforeSend&&!1===e.beforeSend())return;m.sendAsBinary?m.sendAsBinary(q):m.send(q)}else m.abort()}return!0}})(jQuery);
(function(b){function c(c){c.css("min-height","100px");if(!(c.hasClass("tab-pane")&&c.hasClass("cache")&&c.hasClass("loaded"))){var f=c.data("url"),e={target:c[0],url:f||document.location.href,global:!1,quiet:!0,beforeSend:function(){c.data("quiet")||("undefined"!=typeof b.fn.mask?c.mask(MessageBundle.get("ajax.loading")):c.html('<div style="text-align:center;">'+MessageBundle.get("ajax.loading")+"</div>"))},complete:function(){c.data("quiet")||"undefined"==typeof b.fn.unmask||c.unmask()},success:function(b){c.addClass("loaded");
c.css("min-height","")}};e.replacement=f?c.attr("id")+":"+(c.data("replacement")||"content"):c.attr("id");ajax(e)}}b.fn.ajaxpanel=function(){b(this).each(function(){var d=b(this);d.bind("load",function(){c(d)});if(d.data("timeout"))setTimeout(function(){c(d)},parseInt(d.data("timeout")));else if(d.data("interval")){c(d);var f=setInterval(function(){c(d)},parseInt(d.data("interval")));d.addClass("intervaled").data("_interval",f)}else d.hasClass("manual")||c(d)});return this}})(jQuery);
Observation.ajaxpanel=function(b){$(".ajaxpanel",b).ajaxpanel();$(".ajaxpanel .load",b).click(function(){$(this).closest(".ajaxpanel").trigger("load")})};
(function(b){b(function(){b(document).on("click",".toolbar .pagination .firstPage:not(.disabled) a",function(c){c=b(this).closest("form");b(".inputPage",c).val(1);c.submit();return!1}).on("click",".toolbar .pagination .prevPage:not(.disabled) a",function(c){c=b(this).closest("form");b(".inputPage",c).val(function(b,c){return parseInt(c)-1});c.submit();return!1}).on("click",".toolbar .pagination .nextPage:not(.disabled) a",function(c){c=b(this).closest("form");b(".inputPage",c).val(function(b,c){return parseInt(c)+
1});c.submit();return!1}).on("click",".toolbar .pagination .lastPage:not(.disabled) a",function(c){c=b(this).closest("form");b(".inputPage",c).val(b(".totalPage strong",c).text());c.submit();return!1}).on("change",".toolbar .pagination .inputPage",function(c){b(c.target).closest("form").submit();c.preventDefault()}).on("change",".toolbar .pagination select.pageSize",function(c){c=b(c.target).closest("form");b(".inputPage",c).val(1);c.submit()}).on("keydown",'.toolbar input[name="keyword"]',function(c){var d=
b(c.target).closest("form");if(13==c.keyCode)return b(".inputPage",d).val(1),d.submit(),!1}).on("click",".toolbar .glyphicon-search",function(c){c=b(c.target).closest("form");b(".inputPage",c).val(1);c.submit();return!1})})})(jQuery);
